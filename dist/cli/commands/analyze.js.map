{"version":3,"file":"analyze.js","sources":["../../../src/cli/commands/analyze.ts"],"sourcesContent":["/**\n * Analyze Command\n *\n * Advanced documentation analyzer using claude-flow for deep analysis\n * and creating proper knowledge graph documentation structure.\n */\n\nimport { Command } from 'commander';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport { existsSync } from 'fs';\nimport { join } from 'path';\nimport { analyzeDocs } from '../../generators/docs-analyzer.js';\nimport { validateProjectRoot } from '../../core/security.js';\n\n/**\n * Create analyze command\n */\nexport function createAnalyzeCommand(): Command {\n  const command = new Command('analyze');\n\n  command\n    .description('Analyze and migrate docs to knowledge graph structure')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .option('-s, --source <dir>', 'Source docs directory', 'docs')\n    .option('-t, --target <dir>', 'Target directory', 'docs-nn')\n    .option('--use-claude-flow', 'Use claude-flow for deep analysis')\n    .option('--no-moc', 'Skip MOC (Map of Content) generation')\n    .option('--no-link-original', 'Do not link back to original docs')\n    .option('--max-depth <n>', 'Maximum analysis depth', '3')\n    .option('--dry-run', 'Show what would be done without making changes')\n    .option('-v, --verbose', 'Verbose output')\n    .action(async (options) => {\n      const spinner = ora('Analyzing documentation...').start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const sourceDir = options.source;\n        const targetDir = options.target;\n\n        // Check source exists\n        if (!existsSync(join(projectRoot, sourceDir))) {\n          spinner.fail(`Source directory not found: ${sourceDir}`);\n          console.log(chalk.gray('  Specify source with --source <dir>'));\n          process.exit(1);\n        }\n\n        // Check if target already exists\n        if (existsSync(join(projectRoot, targetDir)) && !options.dryRun) {\n          spinner.warn(`Target directory exists: ${targetDir}`);\n          console.log(chalk.yellow('  Files may be overwritten. Use --dry-run to preview.'));\n        }\n\n        if (options.dryRun) {\n          spinner.text = 'Analyzing documentation (dry run)...';\n        }\n\n        if (options.useClaudeFlow) {\n          spinner.text = 'Analyzing with claude-flow (deep analysis)...';\n        }\n\n        const result = await analyzeDocs({\n          sourceDir,\n          targetDir,\n          projectRoot,\n          useClaudeFlow: options.useClaudeFlow,\n          createMOC: options.moc !== false,\n          linkOriginal: options.linkOriginal !== false,\n          maxDepth: parseInt(options.maxDepth, 10),\n          dryRun: options.dryRun,\n          verbose: options.verbose,\n        });\n\n        if (result.success) {\n          if (options.dryRun) {\n            spinner.succeed('Dry run complete!');\n          } else {\n            spinner.succeed('Documentation analyzed and migrated!');\n          }\n        } else {\n          spinner.warn('Analysis completed with errors');\n        }\n\n        // Display results\n        console.log();\n        console.log(chalk.cyan.bold('  Analysis Results'));\n        console.log(chalk.gray('  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€'));\n        console.log();\n        console.log(chalk.white('  Summary:'));\n        console.log(chalk.gray(`    Source:          ${sourceDir}/`));\n        console.log(chalk.gray(`    Target:          ${targetDir}/`));\n        console.log(chalk.green(`    Files analyzed:  ${result.filesAnalyzed}`));\n        console.log(chalk.green(`    Files created:   ${result.filesCreated}`));\n        console.log(chalk.blue(`    MOC files:       ${result.mocFilesCreated}`));\n\n        // Category breakdown\n        if (result.structure.size > 0) {\n          console.log();\n          console.log(chalk.white('  Categories:'));\n          for (const [category, docs] of result.structure) {\n            console.log(chalk.cyan(`    ${category.padEnd(15)}`), chalk.gray(`${docs.length} docs`));\n          }\n        }\n\n        // Show sample analyzed documents\n        if (result.analyzed.length > 0 && options.verbose) {\n          console.log();\n          console.log(chalk.white('  Sample documents:'));\n          result.analyzed.slice(0, 5).forEach(doc => {\n            console.log(chalk.gray(`    ${doc.originalPath}`));\n            console.log(chalk.cyan(`      â†’ ${doc.newPath}`) + chalk.gray(` [${doc.type}]`));\n            if (doc.tags.length > 0) {\n              console.log(chalk.gray(`        tags: ${doc.tags.slice(0, 5).map(t => `#${t}`).join(' ')}`));\n            }\n          });\n          if (result.analyzed.length > 5) {\n            console.log(chalk.gray(`    ... and ${result.analyzed.length - 5} more`));\n          }\n        }\n\n        // Show errors\n        if (result.errors.length > 0) {\n          console.log();\n          console.log(chalk.red('  Errors:'));\n          result.errors.slice(0, 5).forEach(err => {\n            console.log(chalk.gray(`    - ${err}`));\n          });\n          if (result.errors.length > 5) {\n            console.log(chalk.gray(`    ... and ${result.errors.length - 5} more`));\n          }\n        }\n\n        // Research needed summary\n        const researchDocs = result.analyzed.filter(d => d.researchNeeded.length > 0);\n        const todoDocs = result.analyzed.filter(d => d.todos.length > 0);\n\n        if (researchDocs.length > 0 || todoDocs.length > 0) {\n          console.log();\n          console.log(chalk.yellow('  Attention Needed:'));\n          if (researchDocs.length > 0) {\n            console.log(chalk.yellow(`    ðŸ“š ${researchDocs.length} docs need research`));\n          }\n          if (todoDocs.length > 0) {\n            console.log(chalk.yellow(`    âœï¸  ${todoDocs.length} docs have TODOs`));\n          }\n        }\n\n        // Next steps\n        if (!options.dryRun && result.filesCreated > 0) {\n          console.log();\n          console.log(chalk.cyan('  Next steps:'));\n          console.log(chalk.white(`    1. Review ${targetDir}/MOC.md (Master Index)`));\n          console.log(chalk.white(`    2. Check ${targetDir}/PRIMITIVES.md`));\n          console.log(chalk.white(`    3. Run: kg graph --docs ${targetDir}`));\n          console.log(chalk.white(`    4. Run: kg stats --docs ${targetDir}`));\n          if (researchDocs.length > 0) {\n            console.log(chalk.white(`    5. Address research items in flagged docs`));\n          }\n        }\n\n        console.log();\n\n      } catch (error) {\n        spinner.fail('Analysis failed');\n        console.error(chalk.red(String(error)));\n        process.exit(1);\n      }\n    });\n\n  // Deep analyze subcommand (uses claude-flow agents)\n  command\n    .command('deep')\n    .description('Deep analysis using claude-flow agents for comprehensive knowledge extraction')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .option('-s, --source <dir>', 'Source docs directory', 'docs')\n    .option('-t, --target <dir>', 'Target directory', 'docs-nn')\n    .option('--agents <n>', 'Number of parallel agents', '3')\n    .action(async (options) => {\n      const spinner = ora('Initializing deep analysis with claude-flow...').start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const sourceDir = options.source;\n        const targetDir = options.target;\n\n        // Check source exists\n        if (!existsSync(join(projectRoot, sourceDir))) {\n          spinner.fail(`Source directory not found: ${sourceDir}`);\n          process.exit(1);\n        }\n\n        spinner.text = 'Running claude-flow deep analysis...';\n\n        // Run deep analysis with claude-flow\n        const result = await analyzeDocs({\n          sourceDir,\n          targetDir,\n          projectRoot,\n          useClaudeFlow: true,\n          createMOC: true,\n          linkOriginal: true,\n          maxDepth: 5,\n          dryRun: false,\n          verbose: true,\n        });\n\n        if (result.success) {\n          spinner.succeed('Deep analysis complete!');\n        } else {\n          spinner.warn('Deep analysis completed with some errors');\n        }\n\n        console.log();\n        console.log(chalk.cyan.bold('  Deep Analysis Results'));\n        console.log(chalk.gray('  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€'));\n        console.log(chalk.green(`    Documents analyzed:  ${result.filesAnalyzed}`));\n        console.log(chalk.green(`    Knowledge docs:      ${result.filesCreated}`));\n        console.log(chalk.blue(`    Index files (MOC):   ${result.mocFilesCreated}`));\n        console.log(chalk.gray(`    Categories:          ${result.structure.size}`));\n\n        // Research summary\n        const totalResearch = result.analyzed.reduce((sum, d) => sum + d.researchNeeded.length, 0);\n        const totalTodos = result.analyzed.reduce((sum, d) => sum + d.todos.length, 0);\n\n        console.log();\n        console.log(chalk.white('  Knowledge extraction:'));\n        console.log(chalk.cyan(`    Research areas:  ${totalResearch}`));\n        console.log(chalk.cyan(`    TODOs found:     ${totalTodos}`));\n        console.log(chalk.cyan(`    Concepts:        ${result.analyzed.reduce((sum, d) => sum + d.concepts.length, 0)}`));\n        console.log(chalk.cyan(`    Cross-refs:      ${result.analyzed.reduce((sum, d) => sum + d.related.length, 0)}`));\n\n        console.log();\n        console.log(chalk.white(`  Output: ${targetDir}/`));\n        console.log(chalk.gray(`    MOC.md           Master index`));\n        console.log(chalk.gray(`    PRIMITIVES.md    Core building blocks`));\n        console.log(chalk.gray(`    */\\_MOC.md        Category indexes`));\n        console.log();\n\n      } catch (error) {\n        spinner.fail('Deep analysis failed');\n        console.error(chalk.red(String(error)));\n        process.exit(1);\n      }\n    });\n\n  // Report subcommand\n  command\n    .command('report')\n    .description('Generate analysis report without creating files')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .option('-s, --source <dir>', 'Source docs directory', 'docs')\n    .option('--json', 'Output as JSON')\n    .action(async (options) => {\n      const spinner = ora('Generating analysis report...').start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const sourceDir = options.source;\n\n        if (!existsSync(join(projectRoot, sourceDir))) {\n          spinner.fail(`Source directory not found: ${sourceDir}`);\n          process.exit(1);\n        }\n\n        const result = await analyzeDocs({\n          sourceDir,\n          targetDir: 'docs-nn',\n          projectRoot,\n          useClaudeFlow: false,\n          createMOC: false,\n          linkOriginal: false,\n          dryRun: true,\n          verbose: false,\n        });\n\n        spinner.succeed('Report generated!');\n\n        if (options.json) {\n          // JSON output\n          const report = {\n            summary: {\n              totalDocs: result.filesAnalyzed,\n              categories: Object.fromEntries(result.structure),\n            },\n            documents: result.analyzed.map(d => ({\n              original: d.originalPath,\n              target: d.newPath,\n              type: d.type,\n              category: d.category,\n              tags: d.tags,\n              concepts: d.concepts,\n              researchNeeded: d.researchNeeded,\n              todos: d.todos,\n            })),\n            researchAreas: result.analyzed\n              .flatMap(d => d.researchNeeded.map(r => ({ doc: d.title, area: r }))),\n            todos: result.analyzed\n              .flatMap(d => d.todos.map(t => ({ doc: d.title, todo: t }))),\n          };\n          console.log(JSON.stringify(report, null, 2));\n        } else {\n          // Human-readable output\n          console.log();\n          console.log(chalk.cyan.bold('  Documentation Analysis Report'));\n          console.log(chalk.gray('  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€'));\n          console.log();\n          console.log(chalk.white(`  Total documents: ${result.filesAnalyzed}`));\n          console.log();\n\n          // Type breakdown\n          const byType = new Map<string, number>();\n          result.analyzed.forEach(d => {\n            byType.set(d.type, (byType.get(d.type) || 0) + 1);\n          });\n\n          console.log(chalk.white('  By Type:'));\n          for (const [type, count] of byType) {\n            const bar = 'â–ˆ'.repeat(Math.ceil(count / result.filesAnalyzed * 20));\n            console.log(chalk.cyan(`    ${type.padEnd(12)} ${bar} ${count}`));\n          }\n          console.log();\n\n          // Category breakdown\n          console.log(chalk.white('  By Category:'));\n          for (const [category, docs] of result.structure) {\n            const bar = 'â–ˆ'.repeat(Math.ceil(docs.length / result.filesAnalyzed * 20));\n            console.log(chalk.cyan(`    ${category.padEnd(12)} ${bar} ${docs.length}`));\n          }\n          console.log();\n\n          // Issues\n          const withResearch = result.analyzed.filter(d => d.researchNeeded.length > 0);\n          const withTodos = result.analyzed.filter(d => d.todos.length > 0);\n\n          console.log(chalk.white('  Areas Needing Attention:'));\n          console.log(chalk.yellow(`    ðŸ“š Research needed:   ${withResearch.length} docs`));\n          console.log(chalk.yellow(`    âœï¸  With TODOs:        ${withTodos.length} docs`));\n          console.log();\n\n          // Top research areas\n          if (withResearch.length > 0) {\n            console.log(chalk.white('  Top Research Areas:'));\n            withResearch.slice(0, 5).forEach(d => {\n              console.log(chalk.gray(`    ${d.title}:`));\n              d.researchNeeded.slice(0, 2).forEach(r => {\n                console.log(chalk.yellow(`      - ${r.slice(0, 60)}...`));\n              });\n            });\n            console.log();\n          }\n\n          console.log(chalk.cyan('  Run `kg analyze` to migrate documentation'));\n          console.log();\n        }\n\n      } catch (error) {\n        spinner.fail('Report generation failed');\n        console.error(chalk.red(String(error)));\n        process.exit(1);\n      }\n    });\n\n  return command;\n}\n"],"names":[],"mappings":"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"}