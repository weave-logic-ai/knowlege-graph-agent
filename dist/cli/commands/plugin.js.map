{"version":3,"file":"plugin.js","sources":["../../../src/cli/commands/plugin.ts"],"sourcesContent":["/**\n * Plugin Command\n *\n * CLI commands for managing knowledge graph plugins.\n * Provides listing, installation, enabling/disabling, and running plugins.\n *\n * @module cli/commands/plugin\n */\n\nimport { Command } from 'commander';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport { existsSync, readFileSync, mkdirSync, writeFileSync } from 'fs';\nimport { join, resolve, basename } from 'path';\nimport { validateProjectRoot } from '../../core/security.js';\nimport {\n  createDefaultPluginManager,\n  PluginManagerImpl,\n} from '../../plugins/manager.js';\nimport type {\n  PluginType,\n  PluginHook,\n  KGPluginManifest,\n  AnalyzerPlugin,\n  isAnalyzerPlugin,\n} from '../../plugins/types.js';\n\n/**\n * Format plugin type with color\n */\nfunction formatType(type: PluginType): string {\n  const colors: Record<PluginType, (s: string) => string> = {\n    analyzer: chalk.cyan,\n    transformer: chalk.magenta,\n    exporter: chalk.blue,\n    importer: chalk.green,\n    integration: chalk.yellow,\n    visualization: chalk.red,\n    storage: chalk.gray,\n    agent: chalk.white,\n    hook: chalk.dim,\n    generic: chalk.reset,\n  };\n  return (colors[type] || chalk.reset)(type);\n}\n\n/**\n * Format status with color\n */\nfunction formatStatus(enabled: boolean, loaded: boolean): string {\n  if (!enabled) {\n    return chalk.gray('disabled');\n  }\n  if (loaded) {\n    return chalk.green('active');\n  }\n  return chalk.yellow('enabled');\n}\n\n/**\n * Create a simple table row\n */\nfunction tableRow(\n  name: string,\n  version: string,\n  type: string,\n  status: string,\n  maxNameWidth: number = 30\n): string {\n  const nameCol = name.length > maxNameWidth\n    ? name.slice(0, maxNameWidth - 3) + '...'\n    : name.padEnd(maxNameWidth);\n  return `  ${nameCol}  ${version.padEnd(10)}  ${type.padEnd(14)}  ${status}`;\n}\n\n/**\n * Plugin template for creating new plugins\n */\nconst PLUGIN_TEMPLATE = {\n  'package.json': (name: string, type: PluginType = 'analyzer') => `{\n  \"name\": \"${name}\",\n  \"version\": \"1.0.0\",\n  \"description\": \"A custom knowledge graph plugin\",\n  \"type\": \"module\",\n  \"main\": \"dist/index.js\",\n  \"types\": \"dist/index.d.ts\",\n  \"scripts\": {\n    \"build\": \"tsc\",\n    \"dev\": \"tsc --watch\"\n  },\n  \"kg-plugin\": {\n    \"type\": \"${type}\",\n    \"main\": \"dist/index.js\",\n    \"displayName\": \"${name.split('/').pop()?.split('-').map((s: string) => s.charAt(0).toUpperCase() + s.slice(1)).join(' ') || name}\",\n    \"hooks\": [],\n    \"capabilities\": [],\n    \"configSchema\": {\n      \"type\": \"object\",\n      \"properties\": {},\n      \"defaults\": {}\n    }\n  },\n  \"keywords\": [\n    \"kg-plugin\",\n    \"knowledge-graph\"\n  ],\n  \"license\": \"MIT\",\n  \"devDependencies\": {\n    \"typescript\": \"^5.0.0\"\n  },\n  \"peerDependencies\": {\n    \"@weavelogic/knowledge-graph-agent\": \"*\"\n  }\n}`,\n\n  'tsconfig.json': () => `{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"module\": \"NodeNext\",\n    \"moduleResolution\": \"NodeNext\",\n    \"declaration\": true,\n    \"declarationMap\": true,\n    \"outDir\": \"./dist\",\n    \"rootDir\": \"./src\",\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"skipLibCheck\": true,\n    \"forceConsistentCasingInFileNames\": true\n  },\n  \"include\": [\"src/**/*\"],\n  \"exclude\": [\"node_modules\", \"dist\"]\n}`,\n\n  'src/index.ts': (name: string, type: PluginType = 'analyzer') => {\n    const pluginName = name.split('/').pop() || name;\n    const className = pluginName\n      .split('-')\n      .map((s: string) => s.charAt(0).toUpperCase() + s.slice(1))\n      .join('') + 'Plugin';\n\n    if (type === 'analyzer') {\n      return `/**\n * ${className}\n *\n * A custom analyzer plugin for knowledge graphs.\n */\n\nimport type {\n  AnalyzerPlugin,\n  PluginContext,\n  AnalysisInput,\n  AnalysisResult,\n} from '@weavelogic/knowledge-graph-agent';\n\nexport class ${className} implements AnalyzerPlugin {\n  readonly name = '${name}';\n  readonly version = '1.0.0';\n  readonly type = 'analyzer' as const;\n  readonly supportedContentTypes = ['markdown', 'md', 'txt'];\n\n  private context?: PluginContext;\n\n  async initialize(context: PluginContext): Promise<void> {\n    this.context = context;\n    context.logger.info('${className} initialized');\n  }\n\n  async destroy(): Promise<void> {\n    this.context?.logger.info('${className} destroyed');\n  }\n\n  canAnalyze(contentType: string): boolean {\n    return this.supportedContentTypes.includes(contentType.toLowerCase());\n  }\n\n  async analyze(input: AnalysisInput): Promise<AnalysisResult> {\n    const startTime = Date.now();\n\n    try {\n      // Implement your analysis logic here\n      const entities: AnalysisResult['entities'] = [];\n      const relationships: AnalysisResult['relationships'] = [];\n      const tags: AnalysisResult['tags'] = [];\n\n      // Example: Extract simple patterns\n      const lines = input.content.split('\\\\n');\n      let wordCount = 0;\n\n      for (const line of lines) {\n        wordCount += line.split(/\\\\s+/).filter(Boolean).length;\n\n        // Extract headings as entities\n        const headingMatch = line.match(/^(#{1,6})\\\\s+(.+)$/);\n        if (headingMatch) {\n          entities.push({\n            id: \\`heading-\\${entities.length}\\`,\n            type: 'heading',\n            value: headingMatch[2].trim(),\n            confidence: 1.0,\n          });\n        }\n\n        // Extract links as relationships\n        const linkMatches = line.matchAll(/\\\\[\\\\[([^\\\\]]+)\\\\]\\\\]/g);\n        for (const match of linkMatches) {\n          relationships.push({\n            sourceId: input.filePath || input.id,\n            targetId: match[1],\n            type: 'references',\n            confidence: 1.0,\n          });\n        }\n      }\n\n      return {\n        success: true,\n        analysisType: this.name,\n        entities,\n        relationships,\n        tags,\n        metrics: {\n          durationMs: Date.now() - startTime,\n          entitiesFound: entities.length,\n          relationshipsFound: relationships.length,\n        },\n      };\n    } catch (error) {\n      return {\n        success: false,\n        analysisType: this.name,\n        error: {\n          code: 'ANALYSIS_ERROR',\n          message: error instanceof Error ? error.message : String(error),\n        },\n        metrics: {\n          durationMs: Date.now() - startTime,\n        },\n      };\n    }\n  }\n\n  async *analyzeStream(input: AnalysisInput): AsyncIterable<import('@weavelogic/knowledge-graph-agent').AnalysisStreamChunk> {\n    yield {\n      type: 'progress',\n      data: 'Starting analysis...',\n      progress: 0,\n      timestamp: new Date(),\n    };\n\n    const result = await this.analyze(input);\n\n    if (result.entities) {\n      for (const entity of result.entities) {\n        yield {\n          type: 'entity',\n          data: entity,\n          timestamp: new Date(),\n        };\n      }\n    }\n\n    if (result.relationships) {\n      for (const rel of result.relationships) {\n        yield {\n          type: 'relationship',\n          data: rel,\n          timestamp: new Date(),\n        };\n      }\n    }\n\n    yield {\n      type: 'complete',\n      data: result,\n      progress: 100,\n      timestamp: new Date(),\n    };\n  }\n}\n\nexport default new ${className}();\n`;\n    }\n\n    // Generic plugin template\n    return `/**\n * ${className}\n *\n * A custom plugin for knowledge graphs.\n */\n\nimport type {\n  KGPlugin,\n  PluginContext,\n} from '@weavelogic/knowledge-graph-agent';\n\nexport class ${className} implements KGPlugin {\n  readonly name = '${name}';\n  readonly version = '1.0.0';\n  readonly type = '${type}' as const;\n\n  private context?: PluginContext;\n\n  async initialize(context: PluginContext): Promise<void> {\n    this.context = context;\n    context.logger.info('${className} initialized');\n  }\n\n  async destroy(): Promise<void> {\n    this.context?.logger.info('${className} destroyed');\n  }\n\n  async healthCheck(): Promise<{\n    healthy: boolean;\n    message?: string;\n    details?: Record<string, unknown>;\n  }> {\n    return {\n      healthy: true,\n      message: '${className} is running',\n    };\n  }\n}\n\nexport default new ${className}();\n`;\n  },\n\n  'README.md': (name: string) => `# ${name}\n\nA custom knowledge graph plugin.\n\n## Installation\n\n\\`\\`\\`bash\nkg plugin install ./${name}\n\\`\\`\\`\n\n## Usage\n\nOnce installed, the plugin will automatically be loaded.\n\n## Development\n\n\\`\\`\\`bash\nnpm install\nnpm run build\n\\`\\`\\`\n\n## License\n\nMIT\n`,\n};\n\n/**\n * Create plugin command\n */\nexport function createPluginCommand(): Command {\n  const command = new Command('plugin');\n\n  command\n    .description('Manage knowledge graph plugins')\n    .action(() => {\n      console.log(chalk.cyan.bold('\\n  Plugin Commands\\n'));\n      console.log(chalk.gray('  Manage plugins for the knowledge graph agent.\\n'));\n      console.log(chalk.white('  Usage:'));\n      console.log(chalk.gray('    kg plugin list                    List installed plugins'));\n      console.log(chalk.gray('    kg plugin install <name|path>     Install a plugin'));\n      console.log(chalk.gray('    kg plugin uninstall <name>        Uninstall a plugin'));\n      console.log(chalk.gray('    kg plugin enable <name>           Enable a plugin'));\n      console.log(chalk.gray('    kg plugin disable <name>          Disable a plugin'));\n      console.log(chalk.gray('    kg plugin info <name>             Show plugin details'));\n      console.log(chalk.gray('    kg plugin run <name> [file]       Run analyzer plugin'));\n      console.log(chalk.gray('    kg plugin create <name>           Create new plugin\\n'));\n    });\n\n  // List command\n  command\n    .command('list')\n    .alias('ls')\n    .description('List installed plugins')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .option('--json', 'Output as JSON')\n    .option('-a, --all', 'Show all discovered plugins including invalid ones')\n    .action(async (options) => {\n      const spinner = ora('Discovering plugins...').start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const manager = createDefaultPluginManager(projectRoot) as PluginManagerImpl;\n\n        const discovered = await manager.loader.discover();\n\n        spinner.stop();\n\n        if (discovered.length === 0) {\n          console.log(chalk.yellow('\\n  No plugins found.\\n'));\n          console.log(chalk.gray('  Install plugins with:'));\n          console.log(chalk.cyan('    kg plugin install <package-name>'));\n          console.log(chalk.cyan('    kg plugin install ./path/to/plugin\\n'));\n          return;\n        }\n\n        // Filter if not showing all\n        const plugins = options.all\n          ? discovered\n          : discovered.filter((d) => d.valid);\n\n        if (options.json) {\n          console.log(JSON.stringify(plugins.map((p) => ({\n            name: p.manifest.name,\n            version: p.manifest.version,\n            type: p.manifest['kg-plugin'].type,\n            valid: p.valid,\n            path: p.path,\n            description: p.manifest.description,\n          })), null, 2));\n          return;\n        }\n\n        console.log(chalk.cyan.bold('\\n  Installed Plugins\\n'));\n\n        // Table header\n        const maxNameWidth = Math.max(\n          30,\n          ...plugins.map((p) => p.manifest.name.length)\n        );\n        console.log(chalk.white(\n          `  ${'NAME'.padEnd(maxNameWidth)}  ${'VERSION'.padEnd(10)}  ${'TYPE'.padEnd(14)}  STATUS`\n        ));\n        console.log(chalk.gray('  ' + '-'.repeat(maxNameWidth + 40)));\n\n        for (const plugin of plugins) {\n          const name = plugin.manifest.name;\n          const version = plugin.manifest.version;\n          const type = formatType(plugin.manifest['kg-plugin'].type);\n          const status = plugin.valid\n            ? formatStatus(true, manager.loader.isLoaded(name))\n            : chalk.red('invalid');\n\n          console.log(tableRow(name, version, type, status, maxNameWidth));\n\n          if (!plugin.valid && plugin.errors) {\n            for (const error of plugin.errors) {\n              console.log(chalk.red(`    - ${error}`));\n            }\n          }\n        }\n\n        console.log();\n\n        // Summary\n        const activeCount = plugins.filter((p) => p.valid).length;\n        const invalidCount = plugins.filter((p) => !p.valid).length;\n\n        console.log(chalk.gray(`  Total: ${plugins.length} plugins`));\n        if (invalidCount > 0) {\n          console.log(chalk.yellow(`  Invalid: ${invalidCount} plugins`));\n        }\n        console.log();\n\n      } catch (error) {\n        spinner.fail('Failed to list plugins');\n        console.error(chalk.red(String(error)));\n        process.exit(1);\n      }\n    });\n\n  // Install command\n  command\n    .command('install <source>')\n    .alias('add')\n    .description('Install a plugin from npm package or local path')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .action(async (source: string, options) => {\n      const spinner = ora(`Installing plugin: ${source}`).start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const manager = createDefaultPluginManager(projectRoot) as PluginManagerImpl;\n\n        const result = await manager.install(source);\n\n        if (result.success) {\n          spinner.succeed(`Plugin installed: ${chalk.cyan(result.name)}@${result.version}`);\n          console.log(chalk.gray('\\n  The plugin is now enabled and ready to use.'));\n          console.log(chalk.gray('  Run'), chalk.cyan(`kg plugin info ${result.name}`), chalk.gray('for details.\\n'));\n        } else {\n          spinner.fail(`Failed to install plugin: ${result.error}`);\n          process.exit(1);\n        }\n\n      } catch (error) {\n        spinner.fail('Installation failed');\n        console.error(chalk.red(String(error)));\n        process.exit(1);\n      }\n    });\n\n  // Uninstall command\n  command\n    .command('uninstall <name>')\n    .alias('remove')\n    .description('Uninstall a plugin')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .option('-y, --yes', 'Skip confirmation')\n    .action(async (name: string, options) => {\n      const spinner = ora(`Uninstalling plugin: ${name}`).start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const manager = createDefaultPluginManager(projectRoot) as PluginManagerImpl;\n\n        const success = await manager.uninstall(name);\n\n        if (success) {\n          spinner.succeed(`Plugin uninstalled: ${chalk.cyan(name)}`);\n        } else {\n          spinner.fail(`Failed to uninstall plugin: ${name}`);\n          process.exit(1);\n        }\n\n      } catch (error) {\n        spinner.fail('Uninstallation failed');\n        console.error(chalk.red(String(error)));\n        process.exit(1);\n      }\n    });\n\n  // Enable command\n  command\n    .command('enable <name>')\n    .description('Enable a plugin')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .action(async (name: string, options) => {\n      const spinner = ora(`Enabling plugin: ${name}`).start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const manager = createDefaultPluginManager(projectRoot) as PluginManagerImpl;\n\n        await manager.enablePlugin(name);\n        spinner.succeed(`Plugin enabled: ${chalk.cyan(name)}`);\n\n      } catch (error) {\n        spinner.fail(`Failed to enable plugin: ${error instanceof Error ? error.message : String(error)}`);\n        process.exit(1);\n      }\n    });\n\n  // Disable command\n  command\n    .command('disable <name>')\n    .description('Disable a plugin')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .action(async (name: string, options) => {\n      const spinner = ora(`Disabling plugin: ${name}`).start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const manager = createDefaultPluginManager(projectRoot) as PluginManagerImpl;\n\n        await manager.disablePlugin(name);\n        spinner.succeed(`Plugin disabled: ${chalk.cyan(name)}`);\n\n      } catch (error) {\n        spinner.fail(`Failed to disable plugin: ${error instanceof Error ? error.message : String(error)}`);\n        process.exit(1);\n      }\n    });\n\n  // Info command\n  command\n    .command('info <name>')\n    .description('Show plugin details')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .option('--json', 'Output as JSON')\n    .action(async (name: string, options) => {\n      const spinner = ora(`Loading plugin info: ${name}`).start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const manager = createDefaultPluginManager(projectRoot) as PluginManagerImpl;\n\n        const discovered = await manager.loader.discover();\n        const found = discovered.find((d) => d.manifest.name === name);\n\n        if (!found) {\n          spinner.fail(`Plugin not found: ${name}`);\n          process.exit(1);\n        }\n\n        spinner.stop();\n\n        const manifest = found.manifest;\n        const kgPlugin = manifest['kg-plugin'];\n\n        if (options.json) {\n          console.log(JSON.stringify({\n            manifest,\n            path: found.path,\n            valid: found.valid,\n            errors: found.errors,\n          }, null, 2));\n          return;\n        }\n\n        console.log(chalk.cyan.bold(`\\n  ${manifest.name}\\n`));\n\n        // Basic info\n        console.log(chalk.white('  Basic Information'));\n        console.log(chalk.gray(`    Version:      ${manifest.version}`));\n        console.log(chalk.gray(`    Type:         ${formatType(kgPlugin.type)}`));\n        console.log(chalk.gray(`    Status:       ${found.valid ? chalk.green('valid') : chalk.red('invalid')}`));\n        if (manifest.description) {\n          console.log(chalk.gray(`    Description:  ${manifest.description}`));\n        }\n        if (manifest.author) {\n          const author = typeof manifest.author === 'string'\n            ? manifest.author\n            : manifest.author.name;\n          console.log(chalk.gray(`    Author:       ${author}`));\n        }\n        if (manifest.license) {\n          console.log(chalk.gray(`    License:      ${manifest.license}`));\n        }\n\n        // Plugin configuration\n        console.log();\n        console.log(chalk.white('  Plugin Configuration'));\n        console.log(chalk.gray(`    Entry:        ${kgPlugin.main}`));\n        if (kgPlugin.displayName) {\n          console.log(chalk.gray(`    Display Name: ${kgPlugin.displayName}`));\n        }\n        if (kgPlugin.minVersion) {\n          console.log(chalk.gray(`    Min Version:  ${kgPlugin.minVersion}`));\n        }\n        if (kgPlugin.priority !== undefined) {\n          console.log(chalk.gray(`    Priority:     ${kgPlugin.priority}`));\n        }\n        if (kgPlugin.hotReload) {\n          console.log(chalk.gray(`    Hot Reload:   ${chalk.green('enabled')}`));\n        }\n\n        // Hooks\n        if (kgPlugin.hooks && kgPlugin.hooks.length > 0) {\n          console.log();\n          console.log(chalk.white('  Lifecycle Hooks'));\n          for (const hook of kgPlugin.hooks) {\n            console.log(chalk.cyan(`    - ${hook}`));\n          }\n        }\n\n        // Capabilities\n        if (kgPlugin.capabilities && kgPlugin.capabilities.length > 0) {\n          console.log();\n          console.log(chalk.white('  Capabilities'));\n          for (const cap of kgPlugin.capabilities) {\n            console.log(chalk.cyan(`    - ${cap.name}`));\n            if (cap.description) {\n              console.log(chalk.gray(`      ${cap.description}`));\n            }\n          }\n        }\n\n        // Dependencies\n        if (manifest.dependencies && Object.keys(manifest.dependencies).length > 0) {\n          console.log();\n          console.log(chalk.white('  Dependencies'));\n          for (const [dep, version] of Object.entries(manifest.dependencies)) {\n            console.log(chalk.gray(`    ${dep}: ${version}`));\n          }\n        }\n\n        // Plugin dependencies\n        if (kgPlugin.pluginDependencies && kgPlugin.pluginDependencies.length > 0) {\n          console.log();\n          console.log(chalk.white('  Plugin Dependencies'));\n          for (const dep of kgPlugin.pluginDependencies) {\n            const optional = dep.optional ? chalk.gray(' (optional)') : '';\n            console.log(chalk.gray(`    ${dep.name}: ${dep.version}${optional}`));\n          }\n        }\n\n        // Config schema\n        if (kgPlugin.configSchema) {\n          console.log();\n          console.log(chalk.white('  Configuration Schema'));\n          if (kgPlugin.configSchema.properties) {\n            for (const [key, prop] of Object.entries(kgPlugin.configSchema.properties)) {\n              const required = kgPlugin.configSchema.required?.includes(key)\n                ? chalk.red('*')\n                : '';\n              const defaultVal = prop.default !== undefined\n                ? chalk.gray(` (default: ${JSON.stringify(prop.default)})`)\n                : '';\n              console.log(chalk.gray(`    ${key}${required}: ${prop.type}${defaultVal}`));\n              if (prop.description) {\n                console.log(chalk.gray(`      ${prop.description}`));\n              }\n            }\n          }\n        }\n\n        // Path\n        console.log();\n        console.log(chalk.white('  Location'));\n        console.log(chalk.gray(`    Path: ${found.path}`));\n\n        // Errors if any\n        if (found.errors && found.errors.length > 0) {\n          console.log();\n          console.log(chalk.red('  Validation Errors'));\n          for (const error of found.errors) {\n            console.log(chalk.red(`    - ${error}`));\n          }\n        }\n\n        console.log();\n\n      } catch (error) {\n        spinner.fail('Failed to get plugin info');\n        console.error(chalk.red(String(error)));\n        process.exit(1);\n      }\n    });\n\n  // Run command\n  command\n    .command('run <name> [file]')\n    .description('Run an analyzer plugin on a file')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .option('--stream', 'Use streaming output')\n    .option('--json', 'Output as JSON')\n    .option('-o, --options <json>', 'Plugin options as JSON string')\n    .action(async (name: string, file: string | undefined, options) => {\n      if (!file) {\n        console.error(chalk.red('Error: File path is required'));\n        console.log(chalk.gray('\\nUsage: kg plugin run <name> <file>'));\n        process.exit(1);\n      }\n\n      const spinner = ora(`Running plugin: ${name}`).start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const manager = createDefaultPluginManager(projectRoot) as PluginManagerImpl;\n\n        // Find and load the plugin\n        const discovered = await manager.loader.discover();\n        const found = discovered.find((d) => d.manifest.name === name);\n\n        if (!found) {\n          spinner.fail(`Plugin not found: ${name}`);\n          process.exit(1);\n        }\n\n        if (found.manifest['kg-plugin'].type !== 'analyzer') {\n          spinner.fail(`Plugin ${name} is not an analyzer (type: ${found.manifest['kg-plugin'].type})`);\n          process.exit(1);\n        }\n\n        // Load the plugin\n        const loadResult = await manager.loader.loadFromPath(found.path);\n        if (!loadResult.success || !loadResult.plugin) {\n          spinner.fail(`Failed to load plugin: ${loadResult.error}`);\n          process.exit(1);\n        }\n\n        // Initialize the plugin\n        const context = (manager as any).getPluginContext(name);\n        await loadResult.plugin.initialize(context);\n\n        const analyzer = loadResult.plugin as AnalyzerPlugin;\n\n        // Check if it can analyze the file type\n        const filePath = resolve(projectRoot, file);\n        if (!existsSync(filePath)) {\n          spinner.fail(`File not found: ${file}`);\n          process.exit(1);\n        }\n\n        const content = readFileSync(filePath, 'utf-8');\n        const ext = filePath.split('.').pop() || '';\n\n        if (!analyzer.canAnalyze(ext)) {\n          spinner.warn(`Plugin may not support this file type: .${ext}`);\n          console.log(chalk.gray(`  Supported types: ${analyzer.supportedContentTypes.join(', ')}`));\n        }\n\n        spinner.text = `Analyzing ${file}...`;\n\n        const pluginOptions = options.options\n          ? JSON.parse(options.options)\n          : {};\n\n        if (options.stream && analyzer.analyzeStream) {\n          spinner.stop();\n          console.log(chalk.cyan(`\\n  Streaming analysis of ${file}\\n`));\n\n          for await (const chunk of analyzer.analyzeStream({\n            id: `cli-${Date.now()}`,\n            content,\n            contentType: ext,\n            filePath,\n            options: pluginOptions,\n          })) {\n            switch (chunk.type) {\n              case 'progress':\n                console.log(chalk.gray(`  [${chunk.progress || 0}%] ${chunk.data}`));\n                break;\n              case 'entity':\n                console.log(chalk.green(`  + Entity: ${JSON.stringify(chunk.data)}`));\n                break;\n              case 'relationship':\n                console.log(chalk.blue(`  ~ Relationship: ${JSON.stringify(chunk.data)}`));\n                break;\n              case 'tag':\n                console.log(chalk.yellow(`  # Tag: ${JSON.stringify(chunk.data)}`));\n                break;\n              case 'error':\n                console.log(chalk.red(`  ! Error: ${JSON.stringify(chunk.data)}`));\n                break;\n              case 'complete':\n                console.log(chalk.cyan('\\n  Analysis complete.\\n'));\n                break;\n            }\n          }\n        } else {\n          const result = await analyzer.analyze({\n            id: `cli-${Date.now()}`,\n            content,\n            contentType: ext,\n            filePath,\n            options: pluginOptions,\n          });\n\n          spinner.stop();\n\n          if (options.json) {\n            console.log(JSON.stringify(result, null, 2));\n            return;\n          }\n\n          console.log(chalk.cyan.bold(`\\n  Analysis Results: ${file}\\n`));\n\n          if (!result.success) {\n            console.log(chalk.red('  Analysis failed'));\n            if (result.error) {\n              console.log(chalk.red(`    ${result.error.code}: ${result.error.message}`));\n            }\n          } else {\n            // Metrics\n            if (result.metrics) {\n              console.log(chalk.white('  Metrics'));\n              console.log(chalk.gray(`    Duration:      ${result.metrics.durationMs}ms`));\n              if (result.metrics.entitiesFound !== undefined) {\n                console.log(chalk.gray(`    Entities:      ${result.metrics.entitiesFound}`));\n              }\n              if (result.metrics.relationshipsFound !== undefined) {\n                console.log(chalk.gray(`    Relationships: ${result.metrics.relationshipsFound}`));\n              }\n            }\n\n            // Entities\n            if (result.entities && result.entities.length > 0) {\n              console.log();\n              console.log(chalk.white(`  Entities (${result.entities.length})`));\n              for (const entity of result.entities.slice(0, 10)) {\n                const confidence = chalk.gray(`[${(entity.confidence * 100).toFixed(0)}%]`);\n                console.log(chalk.green(`    ${entity.type}: ${entity.value} ${confidence}`));\n              }\n              if (result.entities.length > 10) {\n                console.log(chalk.gray(`    ... and ${result.entities.length - 10} more`));\n              }\n            }\n\n            // Relationships\n            if (result.relationships && result.relationships.length > 0) {\n              console.log();\n              console.log(chalk.white(`  Relationships (${result.relationships.length})`));\n              for (const rel of result.relationships.slice(0, 10)) {\n                const confidence = chalk.gray(`[${(rel.confidence * 100).toFixed(0)}%]`);\n                console.log(chalk.blue(`    ${rel.sourceId} -[${rel.type}]-> ${rel.targetId} ${confidence}`));\n              }\n              if (result.relationships.length > 10) {\n                console.log(chalk.gray(`    ... and ${result.relationships.length - 10} more`));\n              }\n            }\n\n            // Tags\n            if (result.tags && result.tags.length > 0) {\n              console.log();\n              console.log(chalk.white(`  Tags (${result.tags.length})`));\n              const tagStr = result.tags\n                .slice(0, 20)\n                .map((t) => chalk.yellow(`#${t.value}`))\n                .join(' ');\n              console.log(`    ${tagStr}`);\n              if (result.tags.length > 20) {\n                console.log(chalk.gray(`    ... and ${result.tags.length - 20} more`));\n              }\n            }\n\n            // Summary\n            if (result.summary) {\n              console.log();\n              console.log(chalk.white('  Summary'));\n              console.log(chalk.gray(`    ${result.summary}`));\n            }\n\n            // Suggestions\n            if (result.suggestions && result.suggestions.length > 0) {\n              console.log();\n              console.log(chalk.white(`  Suggestions (${result.suggestions.length})`));\n              for (const suggestion of result.suggestions.slice(0, 5)) {\n                const icon = suggestion.type === 'add_link' ? '+'\n                  : suggestion.type === 'add_tag' ? '#'\n                  : suggestion.type === 'fix_format' ? '!'\n                  : '*';\n                console.log(chalk.yellow(`    ${icon} ${suggestion.message}`));\n              }\n              if (result.suggestions.length > 5) {\n                console.log(chalk.gray(`    ... and ${result.suggestions.length - 5} more`));\n              }\n            }\n          }\n\n          console.log();\n        }\n\n        // Cleanup\n        if (loadResult.plugin.destroy) {\n          await loadResult.plugin.destroy();\n        }\n\n      } catch (error) {\n        spinner.fail('Analysis failed');\n        console.error(chalk.red(String(error)));\n        process.exit(1);\n      }\n    });\n\n  // Create command\n  command\n    .command('create <name>')\n    .description('Create a new plugin from template')\n    .option('-p, --path <path>', 'Project root path', '.')\n    .option('-t, --type <type>', 'Plugin type', 'analyzer')\n    .option('-d, --dir <directory>', 'Output directory', 'plugins')\n    .action(async (name: string, options) => {\n      const spinner = ora(`Creating plugin: ${name}`).start();\n\n      try {\n        const projectRoot = validateProjectRoot(options.path);\n        const pluginType = options.type as PluginType;\n\n        // Validate plugin type\n        const validTypes: PluginType[] = [\n          'analyzer', 'transformer', 'exporter', 'importer',\n          'integration', 'visualization', 'storage', 'agent', 'hook', 'generic'\n        ];\n        if (!validTypes.includes(pluginType)) {\n          spinner.fail(`Invalid plugin type: ${pluginType}`);\n          console.log(chalk.gray(`  Valid types: ${validTypes.join(', ')}`));\n          process.exit(1);\n        }\n\n        // Determine output directory\n        const pluginDir = join(projectRoot, options.dir, name.replace(/^@[^/]+\\//, ''));\n\n        if (existsSync(pluginDir)) {\n          spinner.fail(`Directory already exists: ${pluginDir}`);\n          process.exit(1);\n        }\n\n        // Create directory structure\n        mkdirSync(join(pluginDir, 'src'), { recursive: true });\n\n        // Write template files\n        writeFileSync(\n          join(pluginDir, 'package.json'),\n          PLUGIN_TEMPLATE['package.json'](name, pluginType)\n        );\n\n        writeFileSync(\n          join(pluginDir, 'tsconfig.json'),\n          PLUGIN_TEMPLATE['tsconfig.json']()\n        );\n\n        writeFileSync(\n          join(pluginDir, 'src', 'index.ts'),\n          PLUGIN_TEMPLATE['src/index.ts'](name, pluginType)\n        );\n\n        writeFileSync(\n          join(pluginDir, 'README.md'),\n          PLUGIN_TEMPLATE['README.md'](name)\n        );\n\n        spinner.succeed(`Plugin created: ${chalk.cyan(name)}`);\n        console.log();\n        console.log(chalk.white('  Next steps:'));\n        console.log(chalk.gray(`    1. cd ${join(options.dir, name.replace(/^@[^/]+\\//, ''))}`));\n        console.log(chalk.gray('    2. npm install'));\n        console.log(chalk.gray('    3. npm run build'));\n        console.log(chalk.gray(`    4. kg plugin install ./${join(options.dir, name.replace(/^@[^/]+\\//, ''))}`));\n        console.log();\n\n      } catch (error) {\n        spinner.fail('Failed to create plugin');\n        console.error(chalk.red(String(error)));\n        process.exit(1);\n      }\n    });\n\n  return command;\n}\n"],"names":[],"mappings":"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"}