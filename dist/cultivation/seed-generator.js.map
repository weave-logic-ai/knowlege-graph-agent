{"version":3,"file":"seed-generator.js","sources":["../../src/cultivation/seed-generator.ts"],"sourcesContent":["/**\n * Seed Generator - Bootstrap knowledge graph with primitive nodes from codebase analysis\n *\n * Analyzes:\n * - package.json (Node.js dependencies)\n * - composer.json (PHP dependencies)\n * - requirements.txt / pyproject.toml (Python)\n * - Cargo.toml (Rust)\n * - go.mod (Go)\n * - pom.xml / build.gradle (Java)\n * - Existing vault documents\n * - Service configurations\n * - Deployment manifests\n *\n * @module cultivation/seed-generator\n */\n\nimport { readFile, readdir, stat, mkdir, writeFile } from 'fs/promises';\nimport { existsSync } from 'fs';\nimport { join, extname, basename, dirname } from 'path';\nimport matter from 'gray-matter';\nimport { createLogger } from '../utils/logger.js';\nimport type {\n  VaultContext,\n  DependencyInfo,\n  ServiceInfo,\n  SeedAnalysis,\n  GeneratedDocument,\n  DocumentMetadata,\n  Ecosystem,\n  DependencyType,\n  ServiceType,\n  CultivationOptions,\n  InitPrimitivesResult\n} from './types.js';\n\nconst logger = createLogger('seed-generator');\n\n/**\n * SeedGenerator class for analyzing codebases and generating primitive nodes\n */\nexport class SeedGenerator {\n  private vaultContext: VaultContext;\n  private projectRoot: string;\n  private startTime: number = 0;\n  private filesScanned: number = 0;\n\n  constructor(vaultContext: VaultContext, projectRoot: string) {\n    this.vaultContext = vaultContext;\n    this.projectRoot = projectRoot;\n  }\n\n  /**\n   * Create a SeedGenerator from project paths\n   */\n  static async create(projectRoot: string, docsPath: string): Promise<SeedGenerator> {\n    const vaultRoot = join(projectRoot, docsPath);\n    const allFiles = await SeedGenerator.collectVaultFiles(vaultRoot);\n\n    // Load context files if they exist\n    let primitives: string | undefined;\n    let features: string | undefined;\n    let techSpecs: string | undefined;\n\n    try {\n      primitives = await readFile(join(vaultRoot, 'PRIMITIVES.md'), 'utf-8');\n    } catch { /* File doesn't exist */ }\n\n    try {\n      features = await readFile(join(vaultRoot, 'features.md'), 'utf-8');\n    } catch { /* File doesn't exist */ }\n\n    try {\n      techSpecs = await readFile(join(vaultRoot, 'tech-specs.md'), 'utf-8');\n    } catch { /* File doesn't exist */ }\n\n    const vaultContext: VaultContext = {\n      vaultRoot,\n      allFiles,\n      primitives,\n      features,\n      techSpecs\n    };\n\n    return new SeedGenerator(vaultContext, projectRoot);\n  }\n\n  /**\n   * Collect all markdown files in vault\n   */\n  private static async collectVaultFiles(vaultRoot: string): Promise<string[]> {\n    const files: string[] = [];\n\n    async function walk(dir: string): Promise<void> {\n      try {\n        const entries = await readdir(dir, { withFileTypes: true });\n        for (const entry of entries) {\n          const fullPath = join(dir, entry.name);\n          if (entry.isDirectory() && !entry.name.startsWith('.')) {\n            await walk(fullPath);\n          } else if (entry.isFile() && entry.name.endsWith('.md')) {\n            files.push(fullPath);\n          }\n        }\n      } catch {\n        // Directory doesn't exist\n      }\n    }\n\n    await walk(vaultRoot);\n    return files;\n  }\n\n  /**\n   * Analyze entire codebase and generate seed data\n   */\n  async analyze(): Promise<SeedAnalysis> {\n    this.startTime = Date.now();\n    this.filesScanned = 0;\n\n    logger.info('Starting codebase analysis', { projectRoot: this.projectRoot });\n\n    const analysis: SeedAnalysis = {\n      dependencies: [],\n      services: [],\n      frameworks: [],\n      languages: [],\n      deployments: [],\n      existingConcepts: [],\n      existingFeatures: [],\n      metadata: {\n        analyzedAt: new Date().toISOString(),\n        projectRoot: this.projectRoot,\n        filesScanned: 0,\n        duration: 0\n      }\n    };\n\n    // Analyze dependency files\n    await this.analyzeDependencies(analysis);\n\n    // Analyze existing vault documents\n    await this.analyzeVaultDocuments(analysis);\n\n    // Analyze service configurations\n    await this.analyzeServices(analysis);\n\n    // Analyze deployment manifests\n    await this.analyzeDeployments(analysis);\n\n    // Classify dependencies into frameworks\n    this.classifyDependencies(analysis);\n\n    // Dedupe languages\n    analysis.languages = [...new Set(analysis.languages)];\n\n    // Update metadata\n    analysis.metadata.filesScanned = this.filesScanned;\n    analysis.metadata.duration = Date.now() - this.startTime;\n\n    logger.info('Analysis complete', {\n      dependencies: analysis.dependencies.length,\n      frameworks: analysis.frameworks.length,\n      services: analysis.services.length,\n      languages: analysis.languages.length,\n      duration: analysis.metadata.duration\n    });\n\n    return analysis;\n  }\n\n  /**\n   * Generate primitive nodes from seed analysis\n   */\n  async generatePrimitives(analysis: SeedAnalysis): Promise<GeneratedDocument[]> {\n    const documents: GeneratedDocument[] = [];\n    const frameworkNames = new Set(analysis.frameworks.map(f => f.name.toLowerCase()));\n\n    logger.info('Generating primitives', {\n      frameworks: analysis.frameworks.length,\n      dependencies: analysis.dependencies.length,\n      services: analysis.services.length\n    });\n\n    // Generate nodes for frameworks\n    for (const framework of analysis.frameworks) {\n      const doc = this.generateFrameworkNode(framework, analysis);\n      documents.push(doc);\n    }\n\n    // Generate nodes for major dependencies (skip frameworks to avoid duplicates)\n    for (const dep of analysis.dependencies) {\n      if (frameworkNames.has(dep.name.toLowerCase())) {\n        continue;\n      }\n      if (this.shouldGenerateNode(dep)) {\n        const doc = this.generateDependencyNode(dep, analysis);\n        documents.push(doc);\n      }\n    }\n\n    // Generate nodes for services\n    for (const service of analysis.services) {\n      const doc = this.generateServiceNode(service, analysis);\n      documents.push(doc);\n    }\n\n    // Generate language nodes\n    for (const language of analysis.languages) {\n      const doc = this.generateLanguageNode(language, analysis);\n      documents.push(doc);\n    }\n\n    logger.info('Generated primitives', { count: documents.length });\n    return documents;\n  }\n\n  /**\n   * Write generated documents to disk\n   */\n  async writePrimitives(documents: GeneratedDocument[]): Promise<InitPrimitivesResult> {\n    const result: InitPrimitivesResult = {\n      success: true,\n      analysis: {\n        dependencies: [],\n        services: [],\n        frameworks: [],\n        languages: [],\n        deployments: [],\n        existingConcepts: [],\n        existingFeatures: [],\n        metadata: {\n          analyzedAt: new Date().toISOString(),\n          projectRoot: this.projectRoot,\n          filesScanned: 0,\n          duration: 0\n        }\n      },\n      documentsGenerated: [],\n      directoriesCreated: [],\n      errors: [],\n      warnings: []\n    };\n\n    const createdDirs = new Set<string>();\n\n    for (const doc of documents) {\n      try {\n        // Ensure directory exists\n        const dir = dirname(doc.path);\n        if (!createdDirs.has(dir) && !existsSync(dir)) {\n          await mkdir(dir, { recursive: true });\n          createdDirs.add(dir);\n          result.directoriesCreated.push(dir);\n        }\n\n        // Check if file already exists\n        if (existsSync(doc.path)) {\n          result.warnings.push(`File already exists, skipping: ${doc.path}`);\n          continue;\n        }\n\n        // Write file with frontmatter\n        const frontmatterStr = matter.stringify(doc.content, doc.frontmatter);\n        await writeFile(doc.path, frontmatterStr, 'utf-8');\n        result.documentsGenerated.push(doc);\n\n        logger.debug('Created primitive', { path: doc.path, title: doc.title });\n      } catch (error) {\n        const errorMsg = `Failed to write ${doc.path}: ${String(error)}`;\n        result.errors.push(errorMsg);\n        logger.error(errorMsg);\n      }\n    }\n\n    result.success = result.errors.length === 0;\n    return result;\n  }\n\n  /**\n   * Full init-primitives workflow\n   */\n  async initPrimitives(options?: CultivationOptions): Promise<InitPrimitivesResult> {\n    const analysis = await this.analyze();\n    const documents = await this.generatePrimitives(analysis);\n\n    if (options?.dryRun) {\n      return {\n        success: true,\n        analysis,\n        documentsGenerated: documents,\n        directoriesCreated: [],\n        errors: [],\n        warnings: ['Dry run - no files written']\n      };\n    }\n\n    const result = await this.writePrimitives(documents);\n    result.analysis = analysis;\n    return result;\n  }\n\n  // ============================================================================\n  // Dependency Analysis Methods\n  // ============================================================================\n\n  private async analyzeDependencies(analysis: SeedAnalysis): Promise<void> {\n    await this.analyzePackageJson(analysis);\n    await this.analyzePython(analysis);\n    await this.analyzeComposer(analysis);\n    await this.analyzeCargo(analysis);\n    await this.analyzeGoMod(analysis);\n    await this.analyzeJava(analysis);\n  }\n\n  private async analyzePackageJson(analysis: SeedAnalysis): Promise<void> {\n    const packageJsonPaths = [\n      join(this.projectRoot, 'package.json'),\n      join(this.projectRoot, 'packages/*/package.json')\n    ];\n\n    for (const path of [packageJsonPaths[0]]) {\n      try {\n        const content = await readFile(path, 'utf-8');\n        const pkg = JSON.parse(content);\n        this.filesScanned++;\n\n        if (!analysis.languages.includes('javascript')) {\n          analysis.languages.push('javascript');\n        }\n        if (pkg.devDependencies?.typescript || pkg.dependencies?.typescript) {\n          if (!analysis.languages.includes('typescript')) {\n            analysis.languages.push('typescript');\n          }\n        }\n\n        // Process dependencies\n        for (const [name, version] of Object.entries(pkg.dependencies || {})) {\n          const dep = this.createDependencyInfo(name, version as string, 'nodejs', false);\n          analysis.dependencies.push(dep);\n        }\n\n        // Process devDependencies\n        for (const [name, version] of Object.entries(pkg.devDependencies || {})) {\n          const dep = this.createDependencyInfo(name, version as string, 'nodejs', true);\n          analysis.dependencies.push(dep);\n        }\n      } catch {\n        // File doesn't exist\n      }\n    }\n\n    // Check for monorepo packages\n    try {\n      const packagesDir = join(this.projectRoot, 'packages');\n      const entries = await readdir(packagesDir, { withFileTypes: true });\n\n      for (const entry of entries) {\n        if (entry.isDirectory()) {\n          const pkgPath = join(packagesDir, entry.name, 'package.json');\n          try {\n            const content = await readFile(pkgPath, 'utf-8');\n            const pkg = JSON.parse(content);\n            this.filesScanned++;\n\n            for (const [name, version] of Object.entries(pkg.dependencies || {})) {\n              // Avoid duplicates\n              if (!analysis.dependencies.some(d => d.name === name && d.ecosystem === 'nodejs')) {\n                const dep = this.createDependencyInfo(name, version as string, 'nodejs', false);\n                analysis.dependencies.push(dep);\n              }\n            }\n          } catch {\n            // Package doesn't have package.json\n          }\n        }\n      }\n    } catch {\n      // No packages directory\n    }\n  }\n\n  private async analyzePython(analysis: SeedAnalysis): Promise<void> {\n    const requirementsPaths = [\n      join(this.projectRoot, 'requirements.txt'),\n      join(this.projectRoot, 'requirements-dev.txt')\n    ];\n\n    for (const path of requirementsPaths) {\n      try {\n        const content = await readFile(path, 'utf-8');\n        const isDev = path.includes('dev');\n        this.filesScanned++;\n\n        if (!analysis.languages.includes('python')) {\n          analysis.languages.push('python');\n        }\n\n        for (const line of content.split('\\n')) {\n          const trimmed = line.trim();\n          if (!trimmed || trimmed.startsWith('#')) continue;\n\n          const match = trimmed.match(/^([a-zA-Z0-9-_]+)(?:==|>=|<=|~=|>|<)?(.+)?$/);\n          if (match) {\n            const [, name, version] = match;\n            const dep = this.createDependencyInfo(name, version?.trim() || 'latest', 'python', isDev);\n            analysis.dependencies.push(dep);\n          }\n        }\n      } catch {\n        // File doesn't exist\n      }\n    }\n\n    // pyproject.toml\n    try {\n      const content = await readFile(join(this.projectRoot, 'pyproject.toml'), 'utf-8');\n      this.filesScanned++;\n\n      const depMatch = content.match(/\\[tool\\.poetry\\.dependencies\\]([\\s\\S]*?)(?=\\[|$)/);\n      if (depMatch) {\n        for (const line of depMatch[1].split('\\n')) {\n          const match = line.match(/^([a-zA-Z0-9-_]+)\\s*=\\s*\"([^\"]+)\"/);\n          if (match) {\n            const [, name, version] = match;\n            if (name !== 'python') {\n              const dep = this.createDependencyInfo(name, version, 'python', false);\n              analysis.dependencies.push(dep);\n            }\n          }\n        }\n      }\n    } catch {\n      // File doesn't exist\n    }\n  }\n\n  private async analyzeComposer(analysis: SeedAnalysis): Promise<void> {\n    try {\n      const content = await readFile(join(this.projectRoot, 'composer.json'), 'utf-8');\n      const composer = JSON.parse(content);\n      this.filesScanned++;\n\n      if (!analysis.languages.includes('php')) {\n        analysis.languages.push('php');\n      }\n\n      for (const [name, version] of Object.entries(composer.require || {})) {\n        if (name === 'php') continue;\n        const dep = this.createDependencyInfo(name, version as string, 'php', false);\n        analysis.dependencies.push(dep);\n      }\n\n      for (const [name, version] of Object.entries(composer['require-dev'] || {})) {\n        const dep = this.createDependencyInfo(name, version as string, 'php', true);\n        analysis.dependencies.push(dep);\n      }\n    } catch {\n      // File doesn't exist\n    }\n  }\n\n  private async analyzeCargo(analysis: SeedAnalysis): Promise<void> {\n    try {\n      const content = await readFile(join(this.projectRoot, 'Cargo.toml'), 'utf-8');\n      this.filesScanned++;\n\n      if (!analysis.languages.includes('rust')) {\n        analysis.languages.push('rust');\n      }\n\n      const depMatch = content.match(/\\[dependencies\\]([\\s\\S]*?)(?=\\[|$)/);\n      if (depMatch) {\n        for (const line of depMatch[1].split('\\n')) {\n          const match = line.match(/^([a-zA-Z0-9-_]+)\\s*=\\s*\"([^\"]+)\"/);\n          if (match) {\n            const [, name, version] = match;\n            const dep = this.createDependencyInfo(name, version, 'rust', false);\n            dep.repository = `https://crates.io/crates/${name}`;\n            analysis.dependencies.push(dep);\n          }\n        }\n      }\n    } catch {\n      // File doesn't exist\n    }\n  }\n\n  private async analyzeGoMod(analysis: SeedAnalysis): Promise<void> {\n    try {\n      const content = await readFile(join(this.projectRoot, 'go.mod'), 'utf-8');\n      this.filesScanned++;\n\n      if (!analysis.languages.includes('go')) {\n        analysis.languages.push('go');\n      }\n\n      let inRequire = false;\n      for (const line of content.split('\\n')) {\n        if (line.trim() === 'require (') {\n          inRequire = true;\n          continue;\n        }\n        if (line.trim() === ')') {\n          inRequire = false;\n          continue;\n        }\n\n        if (inRequire || line.trim().startsWith('require ')) {\n          const match = line.match(/([a-zA-Z0-9.-]+\\/[a-zA-Z0-9.-/]+)\\s+v([0-9.]+)/);\n          if (match) {\n            const [, name, version] = match;\n            const dep = this.createDependencyInfo(name, version, 'go', false);\n            dep.documentation = [`https://pkg.go.dev/${name}`];\n            dep.repository = `https://${name}`;\n            analysis.dependencies.push(dep);\n          }\n        }\n      }\n    } catch {\n      // File doesn't exist\n    }\n  }\n\n  private async analyzeJava(analysis: SeedAnalysis): Promise<void> {\n    try {\n      const content = await readFile(join(this.projectRoot, 'pom.xml'), 'utf-8');\n      this.filesScanned++;\n\n      if (!analysis.languages.includes('java')) {\n        analysis.languages.push('java');\n      }\n\n      const depMatches = content.matchAll(\n        /<dependency>[\\s\\S]*?<groupId>([^<]+)<\\/groupId>[\\s\\S]*?<artifactId>([^<]+)<\\/artifactId>[\\s\\S]*?(?:<version>([^<]+)<\\/version>)?[\\s\\S]*?<\\/dependency>/g\n      );\n\n      for (const match of depMatches) {\n        const [, groupId, artifactId, version] = match;\n        const name = `${groupId}:${artifactId}`;\n        const dep = this.createDependencyInfo(name, version || 'latest', 'java', false);\n        dep.documentation = [`https://mvnrepository.com/artifact/${groupId}/${artifactId}`];\n        analysis.dependencies.push(dep);\n      }\n    } catch {\n      // File doesn't exist\n    }\n\n    // build.gradle (basic support)\n    try {\n      const content = await readFile(join(this.projectRoot, 'build.gradle'), 'utf-8');\n      this.filesScanned++;\n\n      if (!analysis.languages.includes('java')) {\n        analysis.languages.push('java');\n      }\n    } catch {\n      // File doesn't exist\n    }\n  }\n\n  private createDependencyInfo(name: string, version: string, ecosystem: Ecosystem, isDev: boolean): DependencyInfo {\n    return {\n      name,\n      version,\n      type: this.inferDependencyType(name),\n      category: this.inferCategory(name),\n      ecosystem,\n      documentation: this.getDocumentationLinks(name, ecosystem),\n      repository: this.getRepositoryUrl(name, ecosystem),\n      usedBy: [],\n      relatedTo: [],\n      isDev\n    };\n  }\n\n  // ============================================================================\n  // Vault Document Analysis\n  // ============================================================================\n\n  private async analyzeVaultDocuments(analysis: SeedAnalysis): Promise<void> {\n    for (const filePath of this.vaultContext.allFiles) {\n      try {\n        const content = await readFile(filePath, 'utf-8');\n        const { data } = matter(content);\n        this.filesScanned++;\n\n        if (data.type === 'concept') {\n          analysis.existingConcepts.push(data.title || basename(filePath, '.md'));\n        } else if (data.type === 'feature') {\n          analysis.existingFeatures.push(data.title || basename(filePath, '.md'));\n        }\n\n        // Extract mentions of dependencies\n        const contentLower = content.toLowerCase();\n        for (const dep of analysis.dependencies) {\n          if (contentLower.includes(dep.name.toLowerCase())) {\n            dep.usedBy.push(data.title || basename(filePath, '.md'));\n          }\n        }\n      } catch {\n        // Skip files that can't be read\n      }\n    }\n  }\n\n  // ============================================================================\n  // Service Analysis\n  // ============================================================================\n\n  private async analyzeServices(analysis: SeedAnalysis): Promise<void> {\n    const serviceFiles = [\n      'docker-compose.yml',\n      'docker-compose.yaml',\n      'compose.yml',\n      'compose.yaml'\n    ];\n\n    for (const file of serviceFiles) {\n      try {\n        const content = await readFile(join(this.projectRoot, file), 'utf-8');\n        this.filesScanned++;\n\n        // Simple line-by-line parsing for docker-compose\n        const lines = content.split('\\n');\n        let inServices = false;\n        let currentService: string | null = null;\n        let currentIndent = 0;\n        const serviceData = new Map<string, { image?: string; ports: string[] }>();\n\n        for (const line of lines) {\n          // Check for services section\n          if (line.match(/^services:\\s*$/)) {\n            inServices = true;\n            continue;\n          }\n\n          // Check for end of services section (new top-level key)\n          if (inServices && line.match(/^[a-zA-Z]+:\\s*$/)) {\n            inServices = false;\n            currentService = null;\n            continue;\n          }\n\n          if (!inServices) continue;\n\n          // Detect service name (2-space indent, ends with colon)\n          const serviceMatch = line.match(/^  ([a-zA-Z0-9-_]+):\\s*$/);\n          if (serviceMatch) {\n            currentService = serviceMatch[1];\n            if (!['volumes', 'networks', 'secrets', 'configs'].includes(currentService)) {\n              serviceData.set(currentService, { ports: [] });\n            } else {\n              currentService = null;\n            }\n            continue;\n          }\n\n          // Extract properties for current service (4+ space indent)\n          if (currentService && serviceData.has(currentService)) {\n            const data = serviceData.get(currentService)!;\n\n            const imageMatch = line.match(/^\\s+image:\\s*(.+)$/);\n            if (imageMatch) {\n              data.image = imageMatch[1].trim();\n            }\n\n            const portMatch = line.match(/^\\s+-\\s*[\"']?(\\d+)(?::\\d+)?[\"']?/);\n            if (portMatch) {\n              data.ports.push(portMatch[1]);\n            }\n          }\n        }\n\n        // Convert to ServiceInfo objects\n        for (const [name, data] of serviceData.entries()) {\n          const service: ServiceInfo = {\n            name,\n            type: this.inferServiceType(name, data.image),\n            technology: data.image?.split(':')[0] || 'unknown',\n            dependencies: [],\n            ports: data.ports.map(p => parseInt(p, 10))\n          };\n          analysis.services.push(service);\n        }\n      } catch {\n        // File doesn't exist\n      }\n    }\n  }\n\n  private extractPorts(portsSection?: string): number[] {\n    if (!portsSection) return [];\n    const ports: number[] = [];\n    const matches = portsSection.matchAll(/(\\d+)(?::\\d+)?/g);\n    for (const match of matches) {\n      ports.push(parseInt(match[1], 10));\n    }\n    return ports;\n  }\n\n  // ============================================================================\n  // Deployment Analysis\n  // ============================================================================\n\n  private async analyzeDeployments(analysis: SeedAnalysis): Promise<void> {\n    const deploymentIndicators = [\n      'Dockerfile',\n      'docker-compose.yml',\n      '.github/workflows',\n      'vercel.json',\n      'netlify.toml',\n      'railway.json',\n      'fly.toml',\n      'render.yaml',\n      'kubernetes',\n      'k8s'\n    ];\n\n    for (const indicator of deploymentIndicators) {\n      try {\n        await stat(join(this.projectRoot, indicator));\n        analysis.deployments.push(indicator);\n      } catch {\n        // Doesn't exist\n      }\n    }\n  }\n\n  // ============================================================================\n  // Classification Methods\n  // ============================================================================\n\n  private classifyDependencies(analysis: SeedAnalysis): void {\n    const frameworkKeywords = [\n      'express', 'fastify', 'koa', 'hapi', 'nest',\n      'react', 'vue', 'angular', 'svelte', 'solid',\n      'next', 'nuxt', 'gatsby', 'remix', 'astro',\n      'django', 'flask', 'fastapi', 'rails', 'laravel',\n      'spring', 'quarkus', 'micronaut',\n      'actix', 'rocket', 'axum',\n      'gin', 'echo', 'fiber'\n    ];\n\n    for (const dep of analysis.dependencies) {\n      const nameLower = dep.name.toLowerCase();\n      if (frameworkKeywords.some(fw => nameLower.includes(fw))) {\n        dep.type = 'framework';\n        if (!analysis.frameworks.some(f => f.name === dep.name)) {\n          analysis.frameworks.push(dep);\n        }\n      }\n    }\n  }\n\n  private inferDependencyType(name: string): DependencyType {\n    const nameLower = name.toLowerCase();\n\n    if (nameLower.includes('eslint') || nameLower.includes('prettier') ||\n        nameLower.includes('webpack') || nameLower.includes('vite') ||\n        nameLower.includes('rollup') || nameLower.includes('esbuild')) {\n      return 'tool';\n    }\n\n    return 'library';\n  }\n\n  private inferCategory(name: string): string {\n    const nameLower = name.toLowerCase();\n\n    // Frontend frameworks & UI → components/ui\n    if (['react', 'vue', 'angular', 'svelte', 'solid'].some(fw => nameLower.includes(fw))) {\n      return 'components/ui';\n    }\n    if (['radix', 'shadcn', 'chakra', 'mui', 'antd'].some(ui => nameLower.includes(ui))) {\n      return 'components/ui';\n    }\n\n    // Backend frameworks → services/api\n    if (['express', 'fastapi', 'django', 'flask', 'next', 'fastify', 'koa', 'hapi'].some(fw => nameLower.includes(fw))) {\n      return 'services/api';\n    }\n\n    // Database/ORM → integrations/databases\n    if (['prisma', 'typeorm', 'sequelize', 'mongoose', 'pg', 'mysql', 'sqlite', 'drizzle'].some(db => nameLower.includes(db))) {\n      return 'integrations/databases';\n    }\n\n    // Auth → integrations/auth-providers\n    if (['auth', 'passport', 'jwt', 'oauth', 'clerk', 'auth0', 'nextauth'].some(auth => nameLower.includes(auth))) {\n      return 'integrations/auth-providers';\n    }\n\n    // Testing → guides/testing\n    if (['test', 'jest', 'mocha', 'vitest', 'cypress', 'playwright'].some(test => nameLower.includes(test))) {\n      return 'guides/testing';\n    }\n\n    // Build tools → standards/build-tools\n    if (['webpack', 'vite', 'rollup', 'esbuild', 'turbo', 'nx'].some(tool => nameLower.includes(tool))) {\n      return 'standards/build-tools';\n    }\n\n    // Linters → standards/coding-standards\n    if (['eslint', 'prettier', 'stylelint', 'biome'].some(lint => nameLower.includes(lint))) {\n      return 'standards/coding-standards';\n    }\n\n    // Type definitions → components/utilities\n    if (nameLower.includes('@types') || nameLower.includes('typescript')) {\n      return 'components/utilities';\n    }\n\n    // Default\n    return 'components/utilities';\n  }\n\n  private getDocumentationLinks(name: string, ecosystem: Ecosystem): string[] {\n    const links: string[] = [];\n\n    switch (ecosystem) {\n      case 'nodejs':\n        links.push(`https://www.npmjs.com/package/${name}`);\n        break;\n      case 'python':\n        links.push(`https://pypi.org/project/${name}/`);\n        break;\n      case 'php':\n        links.push(`https://packagist.org/packages/${name}`);\n        break;\n      case 'rust':\n        links.push(`https://crates.io/crates/${name}`);\n        break;\n      case 'go':\n        links.push(`https://pkg.go.dev/${name}`);\n        break;\n      case 'java':\n        if (name.includes(':')) {\n          const [group, artifact] = name.split(':');\n          links.push(`https://mvnrepository.com/artifact/${group}/${artifact}`);\n        }\n        break;\n    }\n\n    return links;\n  }\n\n  private getRepositoryUrl(name: string, ecosystem: Ecosystem): string | undefined {\n    // Could be enhanced to query package registries\n    return undefined;\n  }\n\n  private inferServiceType(name: string, image?: string): ServiceType {\n    const nameLower = name.toLowerCase();\n    const imageLower = image?.toLowerCase() || '';\n\n    if (nameLower.includes('db') || nameLower.includes('database') ||\n        ['postgres', 'mysql', 'mongo', 'mariadb'].some(db => imageLower.includes(db))) {\n      return 'database';\n    }\n    if (nameLower.includes('cache') || imageLower.includes('redis') || imageLower.includes('memcached')) {\n      return 'cache';\n    }\n    if (nameLower.includes('queue') || ['rabbitmq', 'kafka', 'nats'].some(q => imageLower.includes(q))) {\n      return 'queue';\n    }\n    if (nameLower.includes('search') || ['elastic', 'meilisearch', 'typesense'].some(s => imageLower.includes(s))) {\n      return 'search';\n    }\n    if (nameLower.includes('api') || nameLower.includes('backend') || nameLower.includes('server')) {\n      return 'api';\n    }\n    if (nameLower.includes('storage') || imageLower.includes('minio') || imageLower.includes('s3')) {\n      return 'storage';\n    }\n    if (['prometheus', 'grafana', 'jaeger', 'datadog'].some(m => imageLower.includes(m))) {\n      return 'monitoring';\n    }\n\n    return 'compute';\n  }\n\n  private shouldGenerateNode(dep: DependencyInfo): boolean {\n    // Generate nodes for frameworks\n    if (dep.type === 'framework') return true;\n\n    // Major packages that should have nodes\n    const majorPackages = [\n      'react', 'vue', 'angular', 'svelte',\n      'typescript', 'webpack', 'vite', 'esbuild',\n      'jest', 'vitest', 'mocha', 'playwright', 'cypress',\n      'express', 'fastify', 'koa', 'next', 'nuxt',\n      'prisma', 'typeorm', 'sequelize', 'drizzle',\n      'axios', 'graphql', 'trpc', 'zod'\n    ];\n\n    return majorPackages.some(pkg => dep.name.toLowerCase().includes(pkg));\n  }\n\n  // ============================================================================\n  // Node Generation Methods\n  // ============================================================================\n\n  private generateFrameworkNode(framework: DependencyInfo, analysis: SeedAnalysis): GeneratedDocument {\n    const title = this.formatTitle(framework.name);\n    const content = this.buildFrameworkContent(framework, analysis);\n\n    const frontmatter: DocumentMetadata = {\n      title,\n      type: 'primitive',\n      category: framework.category,\n      ecosystem: framework.ecosystem,\n      version: framework.version,\n      status: 'active',\n      tags: ['framework', framework.ecosystem, framework.category.split('/').pop() || ''],\n      documentation: framework.documentation,\n      repository: framework.repository,\n      used_by: framework.usedBy.slice(0, 10),\n      created: new Date().toISOString().split('T')[0],\n      updated: new Date().toISOString()\n    };\n\n    return {\n      type: 'primitive',\n      path: join(this.vaultContext.vaultRoot, framework.category, `${this.slugify(framework.name)}.md`),\n      title,\n      content,\n      frontmatter,\n      backlinks: []\n    };\n  }\n\n  private generateDependencyNode(dep: DependencyInfo, analysis: SeedAnalysis): GeneratedDocument {\n    const title = this.formatTitle(dep.name);\n    const content = this.buildDependencyContent(dep, analysis);\n\n    const frontmatter: DocumentMetadata = {\n      title,\n      type: 'primitive',\n      category: dep.category,\n      ecosystem: dep.ecosystem,\n      version: dep.version,\n      status: 'active',\n      tags: [dep.type, dep.ecosystem, dep.category.split('/').pop() || ''],\n      documentation: dep.documentation,\n      repository: dep.repository,\n      used_by: dep.usedBy.slice(0, 10),\n      created: new Date().toISOString().split('T')[0],\n      updated: new Date().toISOString()\n    };\n\n    return {\n      type: 'primitive',\n      path: join(this.vaultContext.vaultRoot, dep.category, `${this.slugify(dep.name)}.md`),\n      title,\n      content,\n      frontmatter,\n      backlinks: []\n    };\n  }\n\n  private generateServiceNode(service: ServiceInfo, analysis: SeedAnalysis): GeneratedDocument {\n    const title = this.formatTitle(service.name);\n    const content = this.buildServiceContent(service, analysis);\n\n    const frontmatter: DocumentMetadata = {\n      title,\n      type: 'service',\n      category: 'service',\n      service_type: service.type,\n      technology: service.technology,\n      status: 'active',\n      tags: ['service', service.type, service.technology],\n      created: new Date().toISOString().split('T')[0],\n      updated: new Date().toISOString()\n    };\n\n    return {\n      type: 'service',\n      path: join(this.vaultContext.vaultRoot, 'services', service.type, `${this.slugify(service.name)}.md`),\n      title,\n      content,\n      frontmatter,\n      backlinks: []\n    };\n  }\n\n  private generateLanguageNode(language: string, analysis: SeedAnalysis): GeneratedDocument {\n    const title = this.formatTitle(language);\n    const content = this.buildLanguageContent(language, analysis);\n\n    const frontmatter: DocumentMetadata = {\n      title,\n      type: 'standard',\n      category: 'language',\n      status: 'active',\n      tags: ['language', 'programming'],\n      created: new Date().toISOString().split('T')[0],\n      updated: new Date().toISOString()\n    };\n\n    return {\n      type: 'standard',\n      path: join(this.vaultContext.vaultRoot, 'standards', 'programming-languages', `${language.toLowerCase()}.md`),\n      title,\n      content,\n      frontmatter,\n      backlinks: []\n    };\n  }\n\n  // ============================================================================\n  // Content Building Methods\n  // ============================================================================\n\n  private buildFrameworkContent(framework: DependencyInfo, analysis: SeedAnalysis): string {\n    const sections: string[] = [];\n\n    sections.push(`# ${this.formatTitle(framework.name)}\\n`);\n    sections.push(`${framework.category} framework for ${framework.ecosystem}.\\n`);\n\n    sections.push(`## Overview\\n`);\n    sections.push(`**Version:** ${framework.version}`);\n    sections.push(`**Type:** ${framework.type}`);\n    sections.push(`**Ecosystem:** ${framework.ecosystem}\\n`);\n\n    if (framework.usedBy.length > 0) {\n      sections.push(`## Usage in This Project\\n`);\n      framework.usedBy.slice(0, 10).forEach(feature => {\n        sections.push(`- [[${this.slugify(feature)}|${feature}]]`);\n      });\n      sections.push('');\n    }\n\n    if (framework.documentation && framework.documentation.length > 0) {\n      sections.push(`## Documentation\\n`);\n      framework.documentation.forEach(url => {\n        sections.push(`- [${this.getLinkText(url)}](${url})`);\n      });\n      sections.push('');\n    }\n\n    if (framework.repository) {\n      sections.push(`## Repository\\n`);\n      sections.push(`- [Source Code](${framework.repository})\\n`);\n    }\n\n    const related = this.findRelatedTechnologies(framework, analysis);\n    if (related.length > 0) {\n      sections.push(`## Related Primitives\\n`);\n      related.forEach(rel => {\n        sections.push(`- [[${this.slugify(rel)}]]`);\n      });\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  private buildDependencyContent(dep: DependencyInfo, analysis: SeedAnalysis): string {\n    const sections: string[] = [];\n\n    sections.push(`# ${this.formatTitle(dep.name)}\\n`);\n    sections.push(`${dep.category} ${dep.type} for ${dep.ecosystem}.\\n`);\n\n    sections.push(`## Overview\\n`);\n    sections.push(`**Version:** ${dep.version}`);\n    sections.push(`**Type:** ${dep.type}\\n`);\n\n    if (dep.usedBy.length > 0) {\n      sections.push(`## Usage\\n`);\n      dep.usedBy.slice(0, 10).forEach(ref => {\n        sections.push(`- [[${this.slugify(ref)}|${ref}]]`);\n      });\n      if (dep.usedBy.length > 10) {\n        sections.push(`- ...and ${dep.usedBy.length - 10} more`);\n      }\n      sections.push('');\n    }\n\n    if (dep.documentation && dep.documentation.length > 0) {\n      sections.push(`## Documentation\\n`);\n      dep.documentation.forEach(url => {\n        sections.push(`- [${this.getLinkText(url)}](${url})`);\n      });\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  private buildServiceContent(service: ServiceInfo, analysis: SeedAnalysis): string {\n    const sections: string[] = [];\n\n    sections.push(`# ${this.formatTitle(service.name)}\\n`);\n    sections.push(`${service.type} service using ${service.technology}.\\n`);\n\n    sections.push(`## Service Details\\n`);\n    sections.push(`**Type:** ${service.type}`);\n    sections.push(`**Technology:** ${service.technology}`);\n    if (service.framework) {\n      sections.push(`**Framework:** [[${this.slugify(service.framework)}|${service.framework}]]`);\n    }\n    if (service.language) {\n      sections.push(`**Language:** [[${service.language}]]`);\n    }\n    sections.push('');\n\n    if (service.ports && service.ports.length > 0) {\n      sections.push(`## Ports\\n`);\n      service.ports.forEach(port => {\n        sections.push(`- ${port}`);\n      });\n      sections.push('');\n    }\n\n    if (service.dependencies.length > 0) {\n      sections.push(`## Dependencies\\n`);\n      service.dependencies.forEach(dep => {\n        sections.push(`- [[${this.slugify(dep)}]]`);\n      });\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  private buildLanguageContent(language: string, analysis: SeedAnalysis): string {\n    const sections: string[] = [];\n    const langLower = language.toLowerCase();\n\n    sections.push(`# ${this.formatTitle(language)}\\n`);\n    sections.push(`Programming language used in this project.\\n`);\n\n    const frameworks = analysis.frameworks.filter(f =>\n      f.ecosystem === langLower ||\n      (langLower === 'javascript' && f.ecosystem === 'nodejs') ||\n      (langLower === 'typescript' && f.ecosystem === 'nodejs')\n    );\n    const dependencies = analysis.dependencies.filter(d =>\n      d.ecosystem === langLower ||\n      (langLower === 'javascript' && d.ecosystem === 'nodejs') ||\n      (langLower === 'typescript' && d.ecosystem === 'nodejs')\n    );\n\n    if (frameworks.length > 0) {\n      sections.push(`## Frameworks\\n`);\n      frameworks.slice(0, 10).forEach(fw => {\n        sections.push(`- [[${this.slugify(fw.name)}|${this.formatTitle(fw.name)}]]`);\n      });\n      sections.push('');\n    }\n\n    if (dependencies.length > 0) {\n      sections.push(`## Libraries (${dependencies.length})\\n`);\n      sections.push(`This project uses ${dependencies.length} ${language} dependencies.\\n`);\n    }\n\n    sections.push(`## Resources\\n`);\n    sections.push(`- [Official Documentation](${this.getLanguageDocUrl(language)})`);\n    sections.push('');\n\n    return sections.join('\\n');\n  }\n\n  // ============================================================================\n  // Helper Methods\n  // ============================================================================\n\n  private findRelatedTechnologies(dep: DependencyInfo, analysis: SeedAnalysis): string[] {\n    const related: string[] = [];\n\n    // Add related frameworks in same category\n    for (const other of analysis.frameworks) {\n      if (other.name !== dep.name && other.category === dep.category) {\n        related.push(other.name);\n      }\n    }\n\n    return related.slice(0, 5);\n  }\n\n  private formatTitle(name: string): string {\n    return name\n      .split(/[-_/]/)\n      .filter(Boolean)\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(' ');\n  }\n\n  private slugify(text: string): string {\n    return text\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-|-$/g, '');\n  }\n\n  private getLinkText(url: string): string {\n    if (url.includes('github.com')) return 'GitHub';\n    if (url.includes('npmjs.com')) return 'NPM';\n    if (url.includes('pypi.org')) return 'PyPI';\n    if (url.includes('crates.io')) return 'Crates.io';\n    if (url.includes('pkg.go.dev')) return 'Go Docs';\n    if (url.includes('packagist.org')) return 'Packagist';\n    if (url.includes('mvnrepository.com')) return 'Maven';\n    return 'Documentation';\n  }\n\n  private getLanguageDocUrl(language: string): string {\n    const urls: Record<string, string> = {\n      'javascript': 'https://developer.mozilla.org/en-US/docs/Web/JavaScript',\n      'typescript': 'https://www.typescriptlang.org/docs/',\n      'python': 'https://docs.python.org/',\n      'php': 'https://www.php.net/docs.php',\n      'rust': 'https://doc.rust-lang.org/',\n      'go': 'https://go.dev/doc/',\n      'java': 'https://docs.oracle.com/en/java/',\n      'ruby': 'https://www.ruby-lang.org/en/documentation/'\n    };\n\n    return urls[language.toLowerCase()] || `https://www.google.com/search?q=${language}+documentation`;\n  }\n}\n\n// ============================================================================\n// Convenience Functions\n// ============================================================================\n\n/**\n * Create and run a seed analysis\n */\nexport async function analyzeSeed(projectRoot: string, docsPath: string): Promise<SeedAnalysis> {\n  const generator = await SeedGenerator.create(projectRoot, docsPath);\n  return generator.analyze();\n}\n\n/**\n * Initialize primitives from codebase analysis\n */\nexport async function initPrimitives(\n  projectRoot: string,\n  docsPath: string,\n  options?: CultivationOptions\n): Promise<InitPrimitivesResult> {\n  const generator = await SeedGenerator.create(projectRoot, docsPath);\n  return generator.initPrimitives(options);\n}\n"],"names":[],"mappings":"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"}