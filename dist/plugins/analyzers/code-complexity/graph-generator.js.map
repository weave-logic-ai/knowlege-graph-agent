{"version":3,"file":"graph-generator.js","sources":["../../../../src/plugins/analyzers/code-complexity/graph-generator.ts"],"sourcesContent":["/**\n * Knowledge Graph Node Generator for Complexity Analysis\n *\n * Generates knowledge graph nodes and edges from complexity analysis results.\n * Creates structured documentation for complex code that can be integrated\n * into the knowledge graph.\n *\n * @module plugins/analyzers/code-complexity/graph-generator\n */\n\nimport { basename, dirname, relative } from 'path';\nimport { createHash } from 'crypto';\nimport type {\n  ComplexityNode,\n  ComplexityEdge,\n  ComplexityNodeType,\n  ComplexityLevel,\n  FunctionAnalysis,\n  FileAnalysis,\n  ProjectAnalysis,\n  ComplexityScore,\n  AnalyzerConfig,\n} from './types.js';\nimport type { KnowledgeNode, NodeType, GraphEdge } from '../../../core/types.js';\n\n// ============================================================================\n// Node ID Generation\n// ============================================================================\n\n/**\n * Generate a unique node ID for a complexity entry\n */\nfunction generateNodeId(type: ComplexityNodeType, filePath: string, functionName?: string): string {\n  const input = functionName\n    ? `${type}:${filePath}:${functionName}`\n    : `${type}:${filePath}`;\n\n  const hash = createHash('sha256').update(input).digest('hex').slice(0, 12);\n  return `complexity-${hash}`;\n}\n\n/**\n * Generate a slug for file/function names\n */\nfunction slugify(text: string): string {\n  return text\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, '-')\n    .replace(/^-|-$/g, '');\n}\n\n// ============================================================================\n// Complexity Graph Generator\n// ============================================================================\n\n/**\n * Generates knowledge graph nodes from complexity analysis results\n */\nexport class ComplexityGraphGenerator {\n  private projectRoot: string;\n  private thresholds: { high: number; critical: number };\n\n  constructor(projectRoot: string, config?: Partial<AnalyzerConfig>) {\n    this.projectRoot = projectRoot;\n    this.thresholds = {\n      high: config?.thresholds?.cyclomaticHigh ?? 10,\n      critical: config?.thresholds?.cyclomaticCritical ?? 20,\n    };\n  }\n\n  // ==========================================================================\n  // Node Generation\n  // ==========================================================================\n\n  /**\n   * Generate all nodes from project analysis\n   */\n  generateNodes(analysis: ProjectAnalysis): ComplexityNode[] {\n    const nodes: ComplexityNode[] = [];\n\n    // Generate nodes for complex functions\n    for (const fn of analysis.complexFunctions) {\n      const node = this.generateFunctionNode(fn);\n      nodes.push(node);\n    }\n\n    // Generate nodes for complex files\n    for (const file of analysis.hotspots) {\n      const node = this.generateFileNode(file);\n      nodes.push(node);\n    }\n\n    return nodes;\n  }\n\n  /**\n   * Generate a node for a complex function\n   */\n  generateFunctionNode(fn: FunctionAnalysis): ComplexityNode {\n    const id = generateNodeId('complex-function', fn.filePath, fn.name);\n    const relativePath = relative(this.projectRoot, fn.filePath);\n\n    return {\n      id,\n      type: 'complex-function',\n      title: this.generateFunctionTitle(fn),\n      filePath: fn.filePath,\n      functionName: fn.name,\n      lineRange: { start: fn.startLine, end: fn.endLine },\n      complexity: fn.complexity,\n      level: fn.level,\n      issues: fn.issues,\n      recommendations: fn.recommendations,\n      relatedNodes: [],\n      tags: this.generateFunctionTags(fn),\n      createdAt: new Date(),\n    };\n  }\n\n  /**\n   * Generate a node for a complex file\n   */\n  generateFileNode(file: FileAnalysis): ComplexityNode {\n    const id = generateNodeId('complex-file', file.filePath);\n    const relativePath = relative(this.projectRoot, file.filePath);\n\n    return {\n      id,\n      type: 'complex-file',\n      title: `Complex File: ${basename(file.filePath)}`,\n      filePath: file.filePath,\n      complexity: file.complexity,\n      level: file.level,\n      issues: this.generateFileIssues(file),\n      recommendations: this.generateFileRecommendations(file),\n      relatedNodes: file.functions.map((fn) =>\n        generateNodeId('complex-function', file.filePath, fn.name)\n      ),\n      tags: this.generateFileTags(file),\n      createdAt: new Date(),\n    };\n  }\n\n  // ==========================================================================\n  // Edge Generation\n  // ==========================================================================\n\n  /**\n   * Generate edges connecting complexity nodes\n   */\n  generateEdges(\n    nodes: ComplexityNode[],\n    analysis: ProjectAnalysis\n  ): ComplexityEdge[] {\n    const edges: ComplexityEdge[] = [];\n\n    // Create edges between files and their complex functions\n    for (const file of analysis.hotspots) {\n      const fileNodeId = generateNodeId('complex-file', file.filePath);\n\n      for (const fn of file.complexFunctions) {\n        const fnNodeId = generateNodeId('complex-function', file.filePath, fn.name);\n\n        edges.push({\n          source: fileNodeId,\n          target: fnNodeId,\n          type: 'contains',\n          weight: fn.complexity.cyclomatic / this.thresholds.critical,\n          complexityScore: fn.complexity.cyclomatic,\n          context: `${fn.name} is a complex function in this file`,\n        });\n      }\n    }\n\n    // Create edges between related complex functions (same file)\n    for (const file of analysis.files) {\n      const complexFns = file.complexFunctions;\n      for (let i = 0; i < complexFns.length; i++) {\n        for (let j = i + 1; j < complexFns.length; j++) {\n          const fn1 = complexFns[i];\n          const fn2 = complexFns[j];\n\n          edges.push({\n            source: generateNodeId('complex-function', file.filePath, fn1.name),\n            target: generateNodeId('complex-function', file.filePath, fn2.name),\n            type: 'related',\n            weight: 0.5,\n            context: 'Both functions are complex and in the same file',\n          });\n        }\n      }\n    }\n\n    return edges;\n  }\n\n  // ==========================================================================\n  // Knowledge Node Conversion\n  // ==========================================================================\n\n  /**\n   * Convert complexity nodes to knowledge graph nodes\n   */\n  toKnowledgeNodes(nodes: ComplexityNode[]): KnowledgeNode[] {\n    return nodes.map((node) => this.complexityToKnowledge(node));\n  }\n\n  /**\n   * Convert a complexity node to a knowledge node\n   */\n  private complexityToKnowledge(node: ComplexityNode): KnowledgeNode {\n    const relativePath = relative(this.projectRoot, node.filePath);\n    const filename = `${slugify(node.title)}.md`;\n\n    return {\n      id: node.id,\n      path: `docs/complexity/${filename}`,\n      filename,\n      title: node.title,\n      type: 'technical' as NodeType,\n      status: node.level === 'critical' ? 'active' : 'draft',\n      content: this.generateMarkdownContent(node),\n      frontmatter: {\n        title: node.title,\n        type: 'technical',\n        status: node.level === 'critical' ? 'active' : 'draft',\n        tags: node.tags,\n        category: 'complexity',\n        description: this.generateDescription(node),\n        created: node.createdAt.toISOString(),\n        complexity_level: node.level,\n        cyclomatic_complexity: node.complexity.cyclomatic,\n        cognitive_complexity: node.complexity.cognitive,\n        file_path: relativePath,\n        function_name: node.functionName,\n      },\n      tags: node.tags,\n      outgoingLinks: node.relatedNodes.map((target) => ({\n        target,\n        type: 'wikilink' as const,\n        context: 'Related complexity hotspot',\n      })),\n      incomingLinks: [],\n      wordCount: 0,\n      lastModified: node.createdAt,\n    };\n  }\n\n  // ==========================================================================\n  // Markdown Generation\n  // ==========================================================================\n\n  /**\n   * Generate markdown content for a complexity node\n   */\n  generateMarkdownContent(node: ComplexityNode): string {\n    const relativePath = relative(this.projectRoot, node.filePath);\n    const lines: string[] = [];\n\n    // Header\n    lines.push(`# ${node.title}`);\n    lines.push('');\n\n    // Severity badge\n    const severityEmoji = this.getSeverityEmoji(node.level);\n    lines.push(`> ${severityEmoji} **Severity: ${node.level.toUpperCase()}**`);\n    lines.push('');\n\n    // Location\n    lines.push('## Location');\n    lines.push('');\n    lines.push(`- **File**: \\`${relativePath}\\``);\n    if (node.functionName) {\n      lines.push(`- **Function**: \\`${node.functionName}\\``);\n    }\n    if (node.lineRange) {\n      lines.push(`- **Lines**: ${node.lineRange.start} - ${node.lineRange.end}`);\n    }\n    lines.push('');\n\n    // Metrics\n    lines.push('## Complexity Metrics');\n    lines.push('');\n    lines.push('| Metric | Value | Threshold |');\n    lines.push('|--------|-------|-----------|');\n    lines.push(\n      `| Cyclomatic Complexity | ${node.complexity.cyclomatic} | ${this.thresholds.high} (high) / ${this.thresholds.critical} (critical) |`\n    );\n    lines.push(\n      `| Cognitive Complexity | ${node.complexity.cognitive} | 15 (high) / 25 (critical) |`\n    );\n    lines.push(`| Lines of Code | ${node.complexity.loc} | 50 (max) |`);\n    lines.push(`| Max Nesting Depth | ${node.complexity.maxNestingDepth} | 4 (max) |`);\n    lines.push('');\n\n    // Issues\n    if (node.issues.length > 0) {\n      lines.push('## Issues Detected');\n      lines.push('');\n      for (const issue of node.issues) {\n        lines.push(`- ${issue}`);\n      }\n      lines.push('');\n    }\n\n    // Recommendations\n    if (node.recommendations.length > 0) {\n      lines.push('## Recommendations');\n      lines.push('');\n      for (const rec of node.recommendations) {\n        lines.push(`- ${rec}`);\n      }\n      lines.push('');\n    }\n\n    // Related nodes\n    if (node.relatedNodes.length > 0) {\n      lines.push('## Related Hotspots');\n      lines.push('');\n      for (const related of node.relatedNodes) {\n        lines.push(`- [[${related}]]`);\n      }\n      lines.push('');\n    }\n\n    // Tags\n    lines.push('## Tags');\n    lines.push('');\n    lines.push(node.tags.map((t) => `\\`${t}\\``).join(' '));\n    lines.push('');\n\n    return lines.join('\\n');\n  }\n\n  /**\n   * Generate report markdown for entire project\n   */\n  generateProjectReport(analysis: ProjectAnalysis): string {\n    const lines: string[] = [];\n\n    lines.push('# Code Complexity Analysis Report');\n    lines.push('');\n    lines.push(`> Generated: ${new Date().toISOString()}`);\n    lines.push('');\n\n    // Summary\n    lines.push('## Summary');\n    lines.push('');\n    lines.push(`- **Total Files Analyzed**: ${analysis.metrics.totalFiles}`);\n    lines.push(`- **Total Functions**: ${analysis.metrics.totalFunctions}`);\n    lines.push(`- **Total Lines of Code**: ${analysis.metrics.totalLoc}`);\n    lines.push(`- **Analysis Duration**: ${analysis.timing.durationMs}ms`);\n    lines.push('');\n\n    // Averages\n    lines.push('## Average Metrics');\n    lines.push('');\n    lines.push('| Metric | Value |');\n    lines.push('|--------|-------|');\n    lines.push(`| Cyclomatic Complexity | ${analysis.metrics.avgCyclomatic} |`);\n    lines.push(`| Cognitive Complexity | ${analysis.metrics.avgCognitive} |`);\n    lines.push(`| Maintainability Index | ${analysis.metrics.avgMaintainability} |`);\n    lines.push('');\n\n    // Distribution\n    lines.push('## Complexity Distribution');\n    lines.push('');\n    lines.push('| Level | Functions | Files |');\n    lines.push('|-------|-----------|-------|');\n    const levels: ComplexityLevel[] = ['low', 'moderate', 'high', 'critical'];\n    for (const level of levels) {\n      lines.push(\n        `| ${level} | ${analysis.metrics.complexityDistribution[level]} | ${analysis.metrics.filesByLevel[level]} |`\n      );\n    }\n    lines.push('');\n\n    // Top Complex Files\n    if (analysis.metrics.topComplexFiles.length > 0) {\n      lines.push('## Most Complex Files');\n      lines.push('');\n      lines.push('| File | Cyclomatic Complexity |');\n      lines.push('|------|----------------------|');\n      for (const file of analysis.metrics.topComplexFiles) {\n        lines.push(`| ${file.path} | ${file.score} |`);\n      }\n      lines.push('');\n    }\n\n    // Top Complex Functions\n    if (analysis.metrics.topComplexFunctions.length > 0) {\n      lines.push('## Most Complex Functions');\n      lines.push('');\n      lines.push('| Function | File | Score |');\n      lines.push('|----------|------|-------|');\n      for (const fn of analysis.metrics.topComplexFunctions) {\n        lines.push(`| ${fn.name} | ${fn.file} | ${fn.score} |`);\n      }\n      lines.push('');\n    }\n\n    // Hotspots\n    if (analysis.hotspots.length > 0) {\n      lines.push('## Hotspots Requiring Attention');\n      lines.push('');\n      for (const hotspot of analysis.hotspots.slice(0, 10)) {\n        const relativePath = relative(this.projectRoot, hotspot.filePath);\n        lines.push(`### ${basename(hotspot.filePath)}`);\n        lines.push('');\n        lines.push(`- **Path**: \\`${relativePath}\\``);\n        lines.push(`- **Complexity Level**: ${hotspot.level}`);\n        lines.push(`- **Functions**: ${hotspot.functions.length}`);\n        lines.push(`- **Complex Functions**: ${hotspot.complexFunctions.length}`);\n        lines.push('');\n\n        if (hotspot.complexFunctions.length > 0) {\n          lines.push('**Complex Functions:**');\n          for (const fn of hotspot.complexFunctions) {\n            lines.push(`- \\`${fn.name}\\` (CC: ${fn.complexity.cyclomatic})`);\n          }\n          lines.push('');\n        }\n      }\n    }\n\n    return lines.join('\\n');\n  }\n\n  // ==========================================================================\n  // Helper Methods\n  // ==========================================================================\n\n  private generateFunctionTitle(fn: FunctionAnalysis): string {\n    const prefix = fn.parentName ? `${fn.parentName}.` : '';\n    return `Complex Function: ${prefix}${fn.name}`;\n  }\n\n  private generateFunctionTags(fn: FunctionAnalysis): string[] {\n    const tags = ['complexity', fn.level, fn.kind];\n\n    if (fn.isAsync) tags.push('async');\n    if (fn.complexity.cyclomatic >= this.thresholds.critical) {\n      tags.push('needs-refactoring');\n    }\n    if (fn.complexity.maxNestingDepth > 4) {\n      tags.push('deep-nesting');\n    }\n\n    return tags;\n  }\n\n  private generateFileTags(file: FileAnalysis): string[] {\n    const tags = ['complexity', file.level, 'file'];\n\n    if (file.complexFunctions.length > 3) {\n      tags.push('multiple-hotspots');\n    }\n    if (file.complexity.maintainabilityIndex < 50) {\n      tags.push('low-maintainability');\n    }\n\n    return tags;\n  }\n\n  private generateFileIssues(file: FileAnalysis): string[] {\n    const issues: string[] = [];\n\n    if (file.complexFunctions.length > 0) {\n      issues.push(\n        `Contains ${file.complexFunctions.length} complex function(s) that need attention`\n      );\n    }\n\n    if (file.complexity.maintainabilityIndex < 50) {\n      issues.push(\n        `Low maintainability index (${file.complexity.maintainabilityIndex})`\n      );\n    }\n\n    if (file.complexity.avgCyclomatic > 10) {\n      issues.push(\n        `High average cyclomatic complexity (${file.complexity.avgCyclomatic})`\n      );\n    }\n\n    return issues;\n  }\n\n  private generateFileRecommendations(file: FileAnalysis): string[] {\n    const recommendations: string[] = [];\n\n    if (file.complexFunctions.length > 3) {\n      recommendations.push('Consider splitting this file into smaller modules');\n    }\n\n    if (file.complexity.avgCyclomatic > 10) {\n      recommendations.push('Refactor complex functions to reduce average complexity');\n    }\n\n    if (file.complexity.functionCount > 20) {\n      recommendations.push('Large number of functions - consider organizing into classes');\n    }\n\n    return recommendations;\n  }\n\n  private generateDescription(node: ComplexityNode): string {\n    if (node.type === 'complex-function') {\n      return `Complex function with cyclomatic complexity ${node.complexity.cyclomatic}`;\n    }\n    return `Complex file containing ${node.relatedNodes.length} complexity hotspots`;\n  }\n\n  private getSeverityEmoji(level: ComplexityLevel): string {\n    switch (level) {\n      case 'critical':\n        return 'ðŸ”´';\n      case 'high':\n        return 'ðŸŸ ';\n      case 'moderate':\n        return 'ðŸŸ¡';\n      case 'low':\n        return 'ðŸŸ¢';\n    }\n  }\n}\n\n// ============================================================================\n// Factory Functions\n// ============================================================================\n\n/**\n * Create a complexity graph generator\n */\nexport function createGraphGenerator(\n  projectRoot: string,\n  config?: Partial<AnalyzerConfig>\n): ComplexityGraphGenerator {\n  return new ComplexityGraphGenerator(projectRoot, config);\n}\n\n/**\n * Generate knowledge graph nodes from analysis\n */\nexport function generateComplexityNodes(\n  analysis: ProjectAnalysis,\n  projectRoot: string\n): { nodes: ComplexityNode[]; edges: ComplexityEdge[] } {\n  const generator = new ComplexityGraphGenerator(projectRoot);\n  const nodes = generator.generateNodes(analysis);\n  const edges = generator.generateEdges(nodes, analysis);\n  return { nodes, edges };\n}\n"],"names":[],"mappings":"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"}