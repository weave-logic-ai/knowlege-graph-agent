{"version":3,"file":"types.js","sources":["../../src/agents/types.ts"],"sourcesContent":["/**\n * Agent System Types\n *\n * Core type definitions for the agent system including agent types,\n * statuses, configurations, tasks, and message formats.\n *\n * @module agents/types\n */\n\n// ============================================================================\n// Agent Type Enumerations\n// ============================================================================\n\n/**\n * Agent specialization types\n *\n * Each type represents a specific role in the multi-agent system.\n */\nexport enum AgentType {\n  /** Research agent - gathers information and analyzes requirements */\n  RESEARCHER = 'researcher',\n\n  /** Coder agent - implements features and writes code */\n  CODER = 'coder',\n\n  /** Tester agent - writes and runs tests */\n  TESTER = 'tester',\n\n  /** Analyst agent - analyzes data and patterns */\n  ANALYST = 'analyst',\n\n  /** Architect agent - designs system architecture */\n  ARCHITECT = 'architect',\n\n  /** Reviewer agent - reviews code and provides feedback */\n  REVIEWER = 'reviewer',\n\n  /** Coordinator agent - orchestrates multi-agent workflows */\n  COORDINATOR = 'coordinator',\n\n  /** Optimizer agent - optimizes performance and resources */\n  OPTIMIZER = 'optimizer',\n\n  /** Documenter agent - generates documentation */\n  DOCUMENTER = 'documenter',\n\n  /** Planner agent - plans and coordinates tasks */\n  PLANNER = 'planner',\n\n  /** Custom agent - user-defined specialization */\n  CUSTOM = 'custom',\n}\n\n/**\n * Agent execution status\n */\nexport enum AgentStatus {\n  /** Agent is idle and ready to accept tasks */\n  IDLE = 'idle',\n\n  /** Agent is currently executing a task */\n  RUNNING = 'running',\n\n  /** Agent has completed its task successfully */\n  COMPLETED = 'completed',\n\n  /** Agent has failed to complete its task */\n  FAILED = 'failed',\n\n  /** Agent is paused and can be resumed */\n  PAUSED = 'paused',\n\n  /** Agent has been terminated */\n  TERMINATED = 'terminated',\n}\n\n/**\n * Task priority levels\n */\nexport enum TaskPriority {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high',\n  CRITICAL = 'critical',\n}\n\n/**\n * Message types for agent communication\n */\nexport enum MessageType {\n  /** Request for agent to perform an action */\n  REQUEST = 'request',\n\n  /** Response to a request */\n  RESPONSE = 'response',\n\n  /** Notification/event broadcast */\n  NOTIFICATION = 'notification',\n\n  /** Error message */\n  ERROR = 'error',\n\n  /** Status update */\n  STATUS = 'status',\n\n  /** Coordination message between agents */\n  COORDINATION = 'coordination',\n}\n\n// ============================================================================\n// Agent Configuration\n// ============================================================================\n\n/**\n * Base agent configuration interface\n */\nexport interface AgentConfig {\n  /** Unique agent identifier */\n  id?: string;\n\n  /** Agent display name */\n  name: string;\n\n  /** Agent type/specialization */\n  type: AgentType;\n\n  /** Agent description */\n  description?: string;\n\n  /** Agent capabilities */\n  capabilities?: string[];\n\n  /** Maximum concurrent tasks */\n  maxConcurrentTasks?: number;\n\n  /** Task timeout in milliseconds */\n  taskTimeout?: number;\n\n  /** Retry configuration */\n  retry?: {\n    maxRetries: number;\n    backoffMs: number;\n    backoffMultiplier?: number;\n  };\n\n  /** Claude-flow integration settings */\n  claudeFlow?: {\n    enabled: boolean;\n    namespace?: string;\n    hooks?: {\n      preTask?: boolean;\n      postTask?: boolean;\n      postEdit?: boolean;\n    };\n  };\n\n  /** Custom metadata */\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * Extended configuration for specific agent types\n */\nexport interface ResearcherAgentConfig extends AgentConfig {\n  type: AgentType.RESEARCHER;\n  searchDepth?: number;\n  sources?: string[];\n}\n\nexport interface CoderAgentConfig extends AgentConfig {\n  type: AgentType.CODER;\n  language?: string;\n  framework?: string;\n  codeStyle?: string;\n}\n\nexport interface TesterAgentConfig extends AgentConfig {\n  type: AgentType.TESTER;\n  testFramework?: string;\n  coverageThreshold?: number;\n}\n\nexport interface AnalystAgentConfig extends AgentConfig {\n  type: AgentType.ANALYST;\n  analysisType?: 'code' | 'data' | 'performance' | 'security';\n}\n\nexport interface ArchitectAgentConfig extends AgentConfig {\n  type: AgentType.ARCHITECT;\n  patterns?: string[];\n  constraints?: string[];\n}\n\nexport interface PlannerAgentConfig extends AgentConfig {\n  type: AgentType.PLANNER;\n  /** Default timeline estimation strategy */\n  estimationStrategy?: 'optimistic' | 'pessimistic' | 'realistic';\n  /** Include risk assessment by default */\n  includeRiskAssessment?: boolean;\n  /** Maximum parallel tasks to consider */\n  maxParallelTasks?: number;\n}\n\n/**\n * Union type for all agent configurations\n */\nexport type SpecializedAgentConfig =\n  | ResearcherAgentConfig\n  | CoderAgentConfig\n  | TesterAgentConfig\n  | AnalystAgentConfig\n  | ArchitectAgentConfig\n  | PlannerAgentConfig\n  | AgentConfig;\n\n// ============================================================================\n// Agent Task Types\n// ============================================================================\n\n/**\n * Task input definition\n */\nexport interface TaskInput {\n  /** Input data */\n  data?: unknown;\n\n  /** Input files/paths */\n  files?: string[];\n\n  /** Context from previous tasks */\n  context?: Record<string, unknown>;\n\n  /** Parameters for the task */\n  parameters?: Record<string, unknown>;\n}\n\n/**\n * Task definition for agents\n */\nexport interface AgentTask {\n  /** Unique task identifier */\n  id: string;\n\n  /** Human-readable task description */\n  description: string;\n\n  /** Task priority */\n  priority: TaskPriority;\n\n  /** Task input data */\n  input: TaskInput;\n\n  /** Expected output format */\n  expectedOutput?: {\n    type: 'file' | 'data' | 'message' | 'action';\n    schema?: Record<string, unknown>;\n  };\n\n  /** Task dependencies (IDs of tasks that must complete first) */\n  dependencies?: string[];\n\n  /** Task timeout in milliseconds */\n  timeout?: number;\n\n  /** Task metadata */\n  metadata?: Record<string, unknown>;\n\n  /** Creation timestamp */\n  createdAt: Date;\n\n  /** Deadline timestamp */\n  deadline?: Date;\n}\n\n// ============================================================================\n// Agent Result Types\n// ============================================================================\n\n/**\n * Standard result format for agent operations\n */\nexport interface AgentResult<T = unknown> {\n  /** Whether the operation succeeded */\n  success: boolean;\n\n  /** Result data */\n  data?: T;\n\n  /** Error if operation failed */\n  error?: AgentError;\n\n  /** Execution metrics */\n  metrics?: ExecutionMetrics;\n\n  /** Output artifacts (files, logs, etc.) */\n  artifacts?: ResultArtifact[];\n\n  /** Result metadata */\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * Agent error structure\n */\nexport interface AgentError {\n  /** Error code */\n  code: string;\n\n  /** Human-readable message */\n  message: string;\n\n  /** Additional error details */\n  details?: Record<string, unknown>;\n\n  /** Stack trace if available */\n  stack?: string;\n\n  /** Whether the error is retryable */\n  retryable?: boolean;\n}\n\n/**\n * Execution metrics for tracking performance\n */\nexport interface ExecutionMetrics {\n  /** Start time */\n  startTime: Date;\n\n  /** End time */\n  endTime: Date;\n\n  /** Duration in milliseconds */\n  durationMs: number;\n\n  /** Memory usage in bytes */\n  memoryUsage?: number;\n\n  /** Number of retries */\n  retries?: number;\n\n  /** Token usage (for LLM operations) */\n  tokenUsage?: {\n    input: number;\n    output: number;\n    total: number;\n  };\n}\n\n/**\n * Result artifact (file, log, etc.)\n */\nexport interface ResultArtifact {\n  /** Artifact type */\n  type: 'file' | 'log' | 'report' | 'code' | 'data';\n\n  /** Artifact name */\n  name: string;\n\n  /** Artifact path or content */\n  content: string;\n\n  /** MIME type */\n  mimeType?: string;\n\n  /** Artifact metadata */\n  metadata?: Record<string, unknown>;\n}\n\n// ============================================================================\n// Agent Message Types\n// ============================================================================\n\n/**\n * Base message interface for agent communication\n */\nexport interface AgentMessage {\n  /** Message ID */\n  id: string;\n\n  /** Message type */\n  type: MessageType;\n\n  /** Sender agent ID */\n  from: string;\n\n  /** Recipient agent ID (or 'broadcast' for all) */\n  to: string;\n\n  /** Message timestamp */\n  timestamp: Date;\n\n  /** Message payload */\n  payload: unknown;\n\n  /** Correlation ID for request/response matching */\n  correlationId?: string;\n\n  /** Message metadata */\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * Request message for task delegation\n */\nexport interface TaskRequestMessage extends AgentMessage {\n  type: MessageType.REQUEST;\n  payload: {\n    task: AgentTask;\n    urgent?: boolean;\n  };\n}\n\n/**\n * Response message for completed tasks\n */\nexport interface TaskResponseMessage extends AgentMessage {\n  type: MessageType.RESPONSE;\n  payload: {\n    taskId: string;\n    result: AgentResult;\n  };\n}\n\n/**\n * Status update message\n */\nexport interface StatusMessage extends AgentMessage {\n  type: MessageType.STATUS;\n  payload: {\n    agentId: string;\n    status: AgentStatus;\n    currentTask?: string;\n    progress?: number;\n  };\n}\n\n/**\n * Error message\n */\nexport interface ErrorMessage extends AgentMessage {\n  type: MessageType.ERROR;\n  payload: {\n    error: AgentError;\n    taskId?: string;\n    recoverable?: boolean;\n  };\n}\n\n/**\n * Coordination message for multi-agent workflows\n */\nexport interface CoordinationMessage extends AgentMessage {\n  type: MessageType.COORDINATION;\n  payload: {\n    action: 'sync' | 'handoff' | 'merge' | 'split' | 'barrier';\n    data: unknown;\n  };\n}\n\n/**\n * Union type for all message types\n */\nexport type AgentMessageUnion =\n  | TaskRequestMessage\n  | TaskResponseMessage\n  | StatusMessage\n  | ErrorMessage\n  | CoordinationMessage;\n\n// ============================================================================\n// Agent State Types\n// ============================================================================\n\n/**\n * Agent runtime state\n */\nexport interface AgentState {\n  /** Agent ID */\n  id: string;\n\n  /** Current status */\n  status: AgentStatus;\n\n  /** Current task being executed */\n  currentTask?: AgentTask;\n\n  /** Queued tasks */\n  taskQueue: AgentTask[];\n\n  /** Completed task history */\n  completedTasks: string[];\n\n  /** Last activity timestamp */\n  lastActivity: Date;\n\n  /** Error count */\n  errorCount: number;\n\n  /** Custom state data */\n  custom?: Record<string, unknown>;\n}\n\n// ============================================================================\n// Agent Factory Types\n// ============================================================================\n\n/**\n * Agent factory function type\n */\nexport type AgentFactory<T extends AgentConfig = AgentConfig> = (\n  config: T\n) => Promise<AgentInstance>;\n\n/**\n * Agent instance interface\n */\nexport interface AgentInstance {\n  /** Agent configuration */\n  readonly config: AgentConfig;\n\n  /** Agent state */\n  readonly state: AgentState;\n\n  /** Execute a task */\n  execute(task: AgentTask): Promise<AgentResult>;\n\n  /** Pause the agent */\n  pause(): Promise<void>;\n\n  /** Resume the agent */\n  resume(): Promise<void>;\n\n  /** Terminate the agent */\n  terminate(): Promise<void>;\n\n  /** Get agent status */\n  getStatus(): AgentStatus;\n\n  /** Send a message to another agent */\n  sendMessage?(message: AgentMessage): Promise<void>;\n\n  /** Receive and process a message */\n  receiveMessage?(message: AgentMessage): Promise<void>;\n}\n\n// ============================================================================\n// Utility Types\n// ============================================================================\n\n/**\n * Agent capability descriptor\n */\nexport interface AgentCapability {\n  /** Capability name */\n  name: string;\n\n  /** Capability description */\n  description: string;\n\n  /** Required for this agent type */\n  required?: boolean;\n\n  /** Capability version */\n  version?: string;\n}\n\n/**\n * Agent health check result\n */\nexport interface AgentHealthCheck {\n  /** Agent ID */\n  agentId: string;\n\n  /** Health status */\n  healthy: boolean;\n\n  /** Status details */\n  status: AgentStatus;\n\n  /** Last heartbeat */\n  lastHeartbeat: Date;\n\n  /** Error message if unhealthy */\n  error?: string;\n\n  /** Metrics snapshot */\n  metrics?: Partial<ExecutionMetrics>;\n}\n\n/**\n * Helper function to create a unique message ID\n */\nexport function createMessageId(): string {\n  return `msg_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n}\n\n/**\n * Helper function to create a unique task ID\n */\nexport function createTaskId(): string {\n  return `task_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n}\n\n/**\n * Helper function to create a unique agent ID\n */\nexport function createAgentId(type: AgentType): string {\n  return `${type}_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n}\n"],"names":["AgentType","AgentStatus","TaskPriority","MessageType"],"mappings":"AAkBO,IAAK,8BAAAA,eAAL;AAELA,aAAA,YAAA,IAAa;AAGbA,aAAA,OAAA,IAAQ;AAGRA,aAAA,QAAA,IAAS;AAGTA,aAAA,SAAA,IAAU;AAGVA,aAAA,WAAA,IAAY;AAGZA,aAAA,UAAA,IAAW;AAGXA,aAAA,aAAA,IAAc;AAGdA,aAAA,WAAA,IAAY;AAGZA,aAAA,YAAA,IAAa;AAGbA,aAAA,SAAA,IAAU;AAGVA,aAAA,QAAA,IAAS;AAhCC,SAAAA;AAAA,GAAA,aAAA,CAAA,CAAA;AAsCL,IAAK,gCAAAC,iBAAL;AAELA,eAAA,MAAA,IAAO;AAGPA,eAAA,SAAA,IAAU;AAGVA,eAAA,WAAA,IAAY;AAGZA,eAAA,QAAA,IAAS;AAGTA,eAAA,QAAA,IAAS;AAGTA,eAAA,YAAA,IAAa;AAjBH,SAAAA;AAAA,GAAA,eAAA,CAAA,CAAA;AAuBL,IAAK,iCAAAC,kBAAL;AACLA,gBAAA,KAAA,IAAM;AACNA,gBAAA,QAAA,IAAS;AACTA,gBAAA,MAAA,IAAO;AACPA,gBAAA,UAAA,IAAW;AAJD,SAAAA;AAAA,GAAA,gBAAA,CAAA,CAAA;AAUL,IAAK,gCAAAC,iBAAL;AAELA,eAAA,SAAA,IAAU;AAGVA,eAAA,UAAA,IAAW;AAGXA,eAAA,cAAA,IAAe;AAGfA,eAAA,OAAA,IAAQ;AAGRA,eAAA,QAAA,IAAS;AAGTA,eAAA,cAAA,IAAe;AAjBL,SAAAA;AAAA,GAAA,eAAA,CAAA,CAAA;AAufL,SAAS,kBAA0B;AACxC,SAAO,OAAO,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC,CAAC;AACxE;AAKO,SAAS,eAAuB;AACrC,SAAO,QAAQ,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC,CAAC;AACzE;AAKO,SAAS,cAAc,MAAyB;AACrD,SAAO,GAAG,IAAI,IAAI,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC,CAAC;AAC5E;"}