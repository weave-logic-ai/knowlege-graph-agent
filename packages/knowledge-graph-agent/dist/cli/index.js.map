{"version":3,"file":"index.js","sources":["../../src/cli/index.ts"],"sourcesContent":["/**\n * Knowledge Graph Agent CLI\n *\n * Main CLI setup and command registration.\n */\n\nimport { Command } from 'commander';\nimport chalk from 'chalk';\nimport { createInitCommand } from './commands/init.js';\nimport { createGraphCommand } from './commands/graph.js';\nimport { createDocsCommand } from './commands/docs.js';\nimport { createClaudeCommand } from './commands/claude.js';\nimport { createSyncCommand } from './commands/sync.js';\nimport { createStatsCommand } from './commands/stats.js';\nimport { createSearchCommand } from './commands/search.js';\nimport { createConvertCommand, createFrontmatterCommand } from './commands/convert.js';\nimport { createAnalyzeCommand } from './commands/analyze.js';\nimport { createSOPCommands } from './commands/sop.js';\nimport { createInitPrimitivesCommand, createAnalyzeCodebaseCommand } from './commands/init-primitives.js';\nimport { createCultivateCommand } from './commands/cultivate.js';\nimport { createCommitCommand } from './commands/commit.js';\nimport { createConfigCommand } from './commands/config.js';\nimport { createDiagnosticsCommand } from './commands/diagnostics.js';\nimport { createWorkflowCommand } from './commands/workflow.js';\nimport { createAuditCommand } from './commands/audit.js';\nimport { createVectorCommand } from './commands/vector.js';\nimport { createServeCommand } from './commands/serve.js';\nimport { createDashboardCommand } from './commands/dashboard.js';\nimport { createPluginCommand } from './commands/plugin.js';\nimport { createHiveMindCommand } from './commands/hive-mind/index.js';\n\n/**\n * CLI version\n */\nconst VERSION = '0.4.0';\n\n/**\n * Create and configure the CLI program\n */\nexport function createCLI(): Command {\n  const program = new Command();\n\n  program\n    .name('kg')\n    .description('Knowledge Graph Agent - Generate and manage knowledge graphs for Claude Code')\n    .version(VERSION, '-v, --version', 'Display version number');\n\n  // Configure help\n  program.configureHelp({\n    sortSubcommands: true,\n    sortOptions: true,\n  });\n\n  // Add commands\n  program.addCommand(createInitCommand());\n  program.addCommand(createGraphCommand());\n  program.addCommand(createDocsCommand());\n  program.addCommand(createClaudeCommand());\n  program.addCommand(createSyncCommand());\n  program.addCommand(createStatsCommand());\n  program.addCommand(createSearchCommand());\n  program.addCommand(createConvertCommand());\n  program.addCommand(createFrontmatterCommand());\n  program.addCommand(createAnalyzeCommand());\n  program.addCommand(createSOPCommands());\n  program.addCommand(createInitPrimitivesCommand());\n  program.addCommand(createAnalyzeCodebaseCommand());\n  program.addCommand(createCultivateCommand());\n  program.addCommand(createCommitCommand());\n  program.addCommand(createConfigCommand());\n  program.addCommand(createDiagnosticsCommand());\n  program.addCommand(createWorkflowCommand());\n  program.addCommand(createAuditCommand());\n  program.addCommand(createVectorCommand());\n  program.addCommand(createServeCommand());\n  program.addCommand(createDashboardCommand());\n  program.addCommand(createPluginCommand());\n  program.addCommand(createHiveMindCommand());\n\n  // Default action (show help)\n  program.action(() => {\n    console.log(chalk.cyan.bold('\\n  Knowledge Graph Agent\\n'));\n    console.log(chalk.gray('  Generate and manage knowledge graphs for Claude Code\\n'));\n\n    console.log(chalk.white('  Quick Start:'));\n    console.log(chalk.gray('    $ kg init                  # Initialize knowledge graph'));\n    console.log(chalk.gray('    $ kg docs init             # Initialize docs directory'));\n    console.log(chalk.gray('    $ kg graph                 # Generate knowledge graph'));\n    console.log(chalk.gray('    $ kg claude update         # Update CLAUDE.md'));\n    console.log(chalk.gray('    $ kg sync                  # Sync with claude-flow\\n'));\n\n    console.log(chalk.white('  Migration & Analysis:'));\n    console.log(chalk.gray('    $ kg analyze               # Analyze & migrate to knowledge graph'));\n    console.log(chalk.gray('    $ kg analyze deep          # Deep analysis with claude-flow'));\n    console.log(chalk.gray('    $ kg analyze report        # Generate analysis report'));\n    console.log(chalk.gray('    $ kg convert docs          # Convert docs/ â†’ docs-nn/'));\n    console.log(chalk.gray('    $ kg frontmatter add       # Add frontmatter to files'));\n    console.log(chalk.gray('    $ kg frontmatter validate  # Validate frontmatter\\n'));\n\n    console.log(chalk.white('  AI-SDLC SOP Compliance:'));\n    console.log(chalk.gray('    $ kg sop init              # Initialize SOP standards layer'));\n    console.log(chalk.gray('    $ kg sop check             # Check compliance against SOPs'));\n    console.log(chalk.gray('    $ kg sop gaps              # Analyze compliance gaps'));\n    console.log(chalk.gray('    $ kg sop report            # Generate compliance report'));\n    console.log(chalk.gray('    $ kg sop list              # List available SOPs\\n'));\n\n    console.log(chalk.white('  Cultivation & Primitives:'));\n    console.log(chalk.gray('    $ kg init-primitives       # Bootstrap primitives from codebase'));\n    console.log(chalk.gray('    $ kg analyze-codebase      # Analyze dependencies & services'));\n    console.log(chalk.gray('    $ kg init-primitives --dry-run  # Preview without writing\\n'));\n\n    console.log(chalk.white('  Git Integration:'));\n    console.log(chalk.gray('    $ kg commit                # Show status and suggested message'));\n    console.log(chalk.gray('    $ kg commit -a             # Auto-commit with generated message'));\n    console.log(chalk.gray('    $ kg commit -i             # Interactive commit mode'));\n    console.log(chalk.gray('    $ kg commit -m \"message\"   # Commit with custom message'));\n    console.log(chalk.gray('    $ kg commit status         # Show git status with analysis'));\n    console.log(chalk.gray('    $ kg commit log            # Show recent commits'));\n    console.log(chalk.gray('    $ kg commit diff           # Show diff of changes\\n'));\n\n    console.log(chalk.white('  Diagnostics & Health:'));\n    console.log(chalk.gray('    $ kg diag run              # Run full diagnostics'));\n    console.log(chalk.gray('    $ kg diag run --fix        # Attempt to fix issues'));\n    console.log(chalk.gray('    $ kg diag health           # Check system health'));\n    console.log(chalk.gray('    $ kg diag repair           # Repair database issues'));\n    console.log(chalk.gray('    $ kg diag backup           # Create database backup'));\n    console.log(chalk.gray('    $ kg diag backup --list    # List existing backups'));\n    console.log(chalk.gray('    $ kg diag info             # Show system information\\n'));\n\n    console.log(chalk.white('  Workflow Management:'));\n    console.log(chalk.gray('    $ kg workflow start <type> # Start a workflow'));\n    console.log(chalk.gray('    $ kg workflow status [id]  # Check workflow status'));\n    console.log(chalk.gray('    $ kg workflow list         # List active workflows'));\n    console.log(chalk.gray('    $ kg workflow stop <id>    # Stop a workflow'));\n    console.log(chalk.gray('    $ kg workflow history      # Show workflow history\\n'));\n\n    console.log(chalk.white('  Vector Operations:'));\n    console.log(chalk.gray('    $ kg vector search <query> # Semantic search'));\n    console.log(chalk.gray('    $ kg vector stats          # Vector store statistics'));\n    console.log(chalk.gray('    $ kg vector rebuild        # Rebuild vector index'));\n    console.log(chalk.gray('    $ kg vector traj list      # List trajectories'));\n    console.log(chalk.gray('    $ kg vector traj show <id> # Show trajectory details'));\n    console.log(chalk.gray('    $ kg vector traj patterns  # Show detected patterns\\n'));\n\n    console.log(chalk.white('  Audit & Exochain:'));\n    console.log(chalk.gray('    $ kg audit query           # Query the audit log'));\n    console.log(chalk.gray('    $ kg audit checkpoint      # Create a checkpoint'));\n    console.log(chalk.gray('    $ kg audit verify          # Verify chain integrity'));\n    console.log(chalk.gray('    $ kg audit sync status     # Check sync status'));\n    console.log(chalk.gray('    $ kg audit sync peers      # List sync peers'));\n    console.log(chalk.gray('    $ kg audit export          # Export audit log\\n'));\n\n    console.log(chalk.white('  Server Mode:'));\n    console.log(chalk.gray('    $ kg serve                 # Start MCP server (stdio)'));\n    console.log(chalk.gray('    $ kg serve --graphql       # Start GraphQL server'));\n    console.log(chalk.gray('    $ kg serve --dashboard     # Start web dashboard'));\n    console.log(chalk.gray('    $ kg serve --all           # Start all servers'));\n    console.log(chalk.gray('    $ kg serve status          # Show server status\\n'));\n\n    console.log(chalk.white('  Dashboard:'));\n    console.log(chalk.gray('    $ kg dashboard start       # Start dashboard dev server'));\n    console.log(chalk.gray('    $ kg dashboard build       # Build dashboard for production'));\n    console.log(chalk.gray('    $ kg dashboard serve       # Serve built dashboard'));\n    console.log(chalk.gray('    $ kg dashboard open        # Open dashboard in browser'));\n    console.log(chalk.gray('    $ kg dashboard status      # Check dashboard status\\n'));\n\n    console.log(chalk.white('  Plugin Management:'));\n    console.log(chalk.gray('    $ kg plugin list           # List installed plugins'));\n    console.log(chalk.gray('    $ kg plugin install <pkg>  # Install a plugin'));\n    console.log(chalk.gray('    $ kg plugin uninstall <n>  # Uninstall a plugin'));\n    console.log(chalk.gray('    $ kg plugin enable <name>  # Enable a plugin'));\n    console.log(chalk.gray('    $ kg plugin disable <name> # Disable a plugin'));\n    console.log(chalk.gray('    $ kg plugin info <name>    # Show plugin details'));\n    console.log(chalk.gray('    $ kg plugin run <n> <file> # Run analyzer plugin'));\n    console.log(chalk.gray('    $ kg plugin create <name>  # Create new plugin\\n'));\n\n    console.log(chalk.white('  Hive Mind (Graph Reconnection):'));\n    console.log(chalk.gray('    $ kg hive-mind analyze-links <vault>     # Analyze wiki-links'));\n    console.log(chalk.gray('    $ kg hive-mind find-connections <vault>  # Find potential links'));\n    console.log(chalk.gray('    $ kg hive-mind validate-names <vault>    # Validate file names'));\n    console.log(chalk.gray('    $ kg hive-mind add-frontmatter <vault>   # Add YAML frontmatter\\n'));\n\n    console.log(chalk.white('  Commands:'));\n    program.commands.forEach(cmd => {\n      console.log(chalk.cyan(`    ${cmd.name().padEnd(20)}`), chalk.gray(cmd.description() || ''));\n    });\n\n    console.log('\\n  Run', chalk.cyan('kg <command> --help'), 'for more information\\n');\n  });\n\n  return program;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAkCA,MAAM,UAAU;AAKT,SAAS,YAAqB;AACnC,QAAM,UAAU,IAAI,QAAA;AAEpB,UACG,KAAK,IAAI,EACT,YAAY,8EAA8E,EAC1F,QAAQ,SAAS,iBAAiB,wBAAwB;AAG7D,UAAQ,cAAc;AAAA,IACpB,iBAAiB;AAAA,IACjB,aAAa;AAAA,EAAA,CACd;AAGD,UAAQ,WAAW,mBAAmB;AACtC,UAAQ,WAAW,oBAAoB;AACvC,UAAQ,WAAW,mBAAmB;AACtC,UAAQ,WAAW,qBAAqB;AACxC,UAAQ,WAAW,mBAAmB;AACtC,UAAQ,WAAW,oBAAoB;AACvC,UAAQ,WAAW,qBAAqB;AACxC,UAAQ,WAAW,sBAAsB;AACzC,UAAQ,WAAW,0BAA0B;AAC7C,UAAQ,WAAW,sBAAsB;AACzC,UAAQ,WAAW,mBAAmB;AACtC,UAAQ,WAAW,6BAA6B;AAChD,UAAQ,WAAW,8BAA8B;AACjD,UAAQ,WAAW,wBAAwB;AAC3C,UAAQ,WAAW,qBAAqB;AACxC,UAAQ,WAAW,qBAAqB;AACxC,UAAQ,WAAW,0BAA0B;AAC7C,UAAQ,WAAW,uBAAuB;AAC1C,UAAQ,WAAW,oBAAoB;AACvC,UAAQ,WAAW,qBAAqB;AACxC,UAAQ,WAAW,oBAAoB;AACvC,UAAQ,WAAW,wBAAwB;AAC3C,UAAQ,WAAW,qBAAqB;AACxC,UAAQ,WAAW,uBAAuB;AAG1C,UAAQ,OAAO,MAAM;AACnB,YAAQ,IAAI,MAAM,KAAK,KAAK,6BAA6B,CAAC;AAC1D,YAAQ,IAAI,MAAM,KAAK,0DAA0D,CAAC;AAElF,YAAQ,IAAI,MAAM,MAAM,gBAAgB,CAAC;AACzC,YAAQ,IAAI,MAAM,KAAK,6DAA6D,CAAC;AACrF,YAAQ,IAAI,MAAM,KAAK,4DAA4D,CAAC;AACpF,YAAQ,IAAI,MAAM,KAAK,2DAA2D,CAAC;AACnF,YAAQ,IAAI,MAAM,KAAK,mDAAmD,CAAC;AAC3E,YAAQ,IAAI,MAAM,KAAK,0DAA0D,CAAC;AAElF,YAAQ,IAAI,MAAM,MAAM,yBAAyB,CAAC;AAClD,YAAQ,IAAI,MAAM,KAAK,uEAAuE,CAAC;AAC/F,YAAQ,IAAI,MAAM,KAAK,iEAAiE,CAAC;AACzF,YAAQ,IAAI,MAAM,KAAK,2DAA2D,CAAC;AACnF,YAAQ,IAAI,MAAM,KAAK,2DAA2D,CAAC;AACnF,YAAQ,IAAI,MAAM,KAAK,2DAA2D,CAAC;AACnF,YAAQ,IAAI,MAAM,KAAK,yDAAyD,CAAC;AAEjF,YAAQ,IAAI,MAAM,MAAM,2BAA2B,CAAC;AACpD,YAAQ,IAAI,MAAM,KAAK,iEAAiE,CAAC;AACzF,YAAQ,IAAI,MAAM,KAAK,gEAAgE,CAAC;AACxF,YAAQ,IAAI,MAAM,KAAK,0DAA0D,CAAC;AAClF,YAAQ,IAAI,MAAM,KAAK,6DAA6D,CAAC;AACrF,YAAQ,IAAI,MAAM,KAAK,wDAAwD,CAAC;AAEhF,YAAQ,IAAI,MAAM,MAAM,6BAA6B,CAAC;AACtD,YAAQ,IAAI,MAAM,KAAK,qEAAqE,CAAC;AAC7F,YAAQ,IAAI,MAAM,KAAK,kEAAkE,CAAC;AAC1F,YAAQ,IAAI,MAAM,KAAK,iEAAiE,CAAC;AAEzF,YAAQ,IAAI,MAAM,MAAM,oBAAoB,CAAC;AAC7C,YAAQ,IAAI,MAAM,KAAK,oEAAoE,CAAC;AAC5F,YAAQ,IAAI,MAAM,KAAK,qEAAqE,CAAC;AAC7F,YAAQ,IAAI,MAAM,KAAK,0DAA0D,CAAC;AAClF,YAAQ,IAAI,MAAM,KAAK,6DAA6D,CAAC;AACrF,YAAQ,IAAI,MAAM,KAAK,gEAAgE,CAAC;AACxF,YAAQ,IAAI,MAAM,KAAK,sDAAsD,CAAC;AAC9E,YAAQ,IAAI,MAAM,KAAK,yDAAyD,CAAC;AAEjF,YAAQ,IAAI,MAAM,MAAM,yBAAyB,CAAC;AAClD,YAAQ,IAAI,MAAM,KAAK,uDAAuD,CAAC;AAC/E,YAAQ,IAAI,MAAM,KAAK,wDAAwD,CAAC;AAChF,YAAQ,IAAI,MAAM,KAAK,sDAAsD,CAAC;AAC9E,YAAQ,IAAI,MAAM,KAAK,yDAAyD,CAAC;AACjF,YAAQ,IAAI,MAAM,KAAK,yDAAyD,CAAC;AACjF,YAAQ,IAAI,MAAM,KAAK,wDAAwD,CAAC;AAChF,YAAQ,IAAI,MAAM,KAAK,4DAA4D,CAAC;AAEpF,YAAQ,IAAI,MAAM,MAAM,wBAAwB,CAAC;AACjD,YAAQ,IAAI,MAAM,KAAK,mDAAmD,CAAC;AAC3E,YAAQ,IAAI,MAAM,KAAK,wDAAwD,CAAC;AAChF,YAAQ,IAAI,MAAM,KAAK,wDAAwD,CAAC;AAChF,YAAQ,IAAI,MAAM,KAAK,kDAAkD,CAAC;AAC1E,YAAQ,IAAI,MAAM,KAAK,0DAA0D,CAAC;AAElF,YAAQ,IAAI,MAAM,MAAM,sBAAsB,CAAC;AAC/C,YAAQ,IAAI,MAAM,KAAK,kDAAkD,CAAC;AAC1E,YAAQ,IAAI,MAAM,KAAK,0DAA0D,CAAC;AAClF,YAAQ,IAAI,MAAM,KAAK,uDAAuD,CAAC;AAC/E,YAAQ,IAAI,MAAM,KAAK,oDAAoD,CAAC;AAC5E,YAAQ,IAAI,MAAM,KAAK,0DAA0D,CAAC;AAClF,YAAQ,IAAI,MAAM,KAAK,2DAA2D,CAAC;AAEnF,YAAQ,IAAI,MAAM,MAAM,qBAAqB,CAAC;AAC9C,YAAQ,IAAI,MAAM,KAAK,sDAAsD,CAAC;AAC9E,YAAQ,IAAI,MAAM,KAAK,sDAAsD,CAAC;AAC9E,YAAQ,IAAI,MAAM,KAAK,yDAAyD,CAAC;AACjF,YAAQ,IAAI,MAAM,KAAK,oDAAoD,CAAC;AAC5E,YAAQ,IAAI,MAAM,KAAK,kDAAkD,CAAC;AAC1E,YAAQ,IAAI,MAAM,KAAK,qDAAqD,CAAC;AAE7E,YAAQ,IAAI,MAAM,MAAM,gBAAgB,CAAC;AACzC,YAAQ,IAAI,MAAM,KAAK,2DAA2D,CAAC;AACnF,YAAQ,IAAI,MAAM,KAAK,uDAAuD,CAAC;AAC/E,YAAQ,IAAI,MAAM,KAAK,sDAAsD,CAAC;AAC9E,YAAQ,IAAI,MAAM,KAAK,oDAAoD,CAAC;AAC5E,YAAQ,IAAI,MAAM,KAAK,uDAAuD,CAAC;AAE/E,YAAQ,IAAI,MAAM,MAAM,cAAc,CAAC;AACvC,YAAQ,IAAI,MAAM,KAAK,6DAA6D,CAAC;AACrF,YAAQ,IAAI,MAAM,KAAK,iEAAiE,CAAC;AACzF,YAAQ,IAAI,MAAM,KAAK,wDAAwD,CAAC;AAChF,YAAQ,IAAI,MAAM,KAAK,4DAA4D,CAAC;AACpF,YAAQ,IAAI,MAAM,KAAK,2DAA2D,CAAC;AAEnF,YAAQ,IAAI,MAAM,MAAM,sBAAsB,CAAC;AAC/C,YAAQ,IAAI,MAAM,KAAK,yDAAyD,CAAC;AACjF,YAAQ,IAAI,MAAM,KAAK,mDAAmD,CAAC;AAC3E,YAAQ,IAAI,MAAM,KAAK,qDAAqD,CAAC;AAC7E,YAAQ,IAAI,MAAM,KAAK,kDAAkD,CAAC;AAC1E,YAAQ,IAAI,MAAM,KAAK,mDAAmD,CAAC;AAC3E,YAAQ,IAAI,MAAM,KAAK,sDAAsD,CAAC;AAC9E,YAAQ,IAAI,MAAM,KAAK,sDAAsD,CAAC;AAC9E,YAAQ,IAAI,MAAM,KAAK,sDAAsD,CAAC;AAE9E,YAAQ,IAAI,MAAM,MAAM,mCAAmC,CAAC;AAC5D,YAAQ,IAAI,MAAM,KAAK,mEAAmE,CAAC;AAC3F,YAAQ,IAAI,MAAM,KAAK,qEAAqE,CAAC;AAC7F,YAAQ,IAAI,MAAM,KAAK,oEAAoE,CAAC;AAC5F,YAAQ,IAAI,MAAM,KAAK,uEAAuE,CAAC;AAE/F,YAAQ,IAAI,MAAM,MAAM,aAAa,CAAC;AACtC,YAAQ,SAAS,QAAQ,CAAA,QAAO;AAC9B,cAAQ,IAAI,MAAM,KAAK,OAAO,IAAI,OAAO,OAAO,EAAE,CAAC,EAAE,GAAG,MAAM,KAAK,IAAI,YAAA,KAAiB,EAAE,CAAC;AAAA,IAC7F,CAAC;AAED,YAAQ,IAAI,WAAW,MAAM,KAAK,qBAAqB,GAAG,wBAAwB;AAAA,EACpF,CAAC;AAED,SAAO;AACT;"}