{"version":3,"file":"docs-init.js","sources":["../../src/generators/docs-init.ts"],"sourcesContent":["/**\n * Docs Directory Initializer\n *\n * Creates the initial docs directory structure following the weave-nn\n * methodology with proper PRIMITIVES.md taxonomy.\n *\n * SECURITY NOTES (Handlebars Templates):\n * - All templates use double-braces {{}} which HTML-escapes output\n * - Triple-braces {{{raw}}} are NOT used, preventing injection attacks\n * - Template variables come from internal sources (project analysis), not direct user input\n * - See: https://handlebarsjs.com/guide/#html-escaping\n */\n\nimport { existsSync, mkdirSync, writeFileSync, readFileSync } from 'fs';\nimport { join, basename } from 'path';\nimport fg from 'fast-glob';\nimport Handlebars from 'handlebars';\nimport type {\n  DocsInitOptions,\n  DocsInitResult,\n  NodeType,\n} from '../core/types.js';\n\n/**\n * Default docs structure based on PRIMITIVES.md taxonomy\n */\nconst DEFAULT_STRUCTURE = {\n  directories: [\n    // Core concepts\n    'concepts',\n    'concepts/architecture',\n    'concepts/patterns',\n\n    // Components\n    'components',\n    'components/ui',\n    'components/utilities',\n\n    // Services\n    'services',\n    'services/api',\n    'services/workers',\n\n    // Features\n    'features',\n    'features/core',\n    'features/advanced',\n\n    // Integrations\n    'integrations',\n    'integrations/databases',\n    'integrations/auth-providers',\n    'integrations/storage',\n    'integrations/monitoring',\n\n    // Standards\n    'standards',\n    'standards/coding-standards',\n    'standards/programming-languages',\n    'standards/build-tools',\n\n    // Guides\n    'guides',\n    'guides/getting-started',\n    'guides/testing',\n    'guides/deployment',\n\n    // References\n    'references',\n    'references/api',\n    'references/cli',\n\n    // Meta\n    '_templates',\n    '_attachments',\n  ],\n  files: {\n    'README.md': 'readme',\n    'PRIMITIVES.md': 'primitives',\n    'MOC.md': 'moc',\n    '_templates/concept.md': 'template-concept',\n    '_templates/technical.md': 'template-technical',\n    '_templates/feature.md': 'template-feature',\n    '_templates/service.md': 'template-service',\n    '_templates/guide.md': 'template-guide',\n  },\n};\n\n/**\n * Template content for docs files\n */\nconst TEMPLATES: Record<string, string> = {\n  readme: `# {{projectName}} Documentation\n\nWelcome to the {{projectName}} knowledge base.\n\n## Quick Navigation\n\n- [[MOC|Map of Content]] - Overview of all documentation\n- [[PRIMITIVES|Primitives]] - Core building blocks and technologies\n\n## Structure\n\nThis documentation follows the Weave-NN knowledge graph methodology:\n\n\\`\\`\\`\ndocs/\n├── concepts/       # Abstract concepts and ideas\n├── components/     # Reusable components and utilities\n├── services/       # Backend services and APIs\n├── features/       # Product features and capabilities\n├── integrations/   # External integrations\n├── standards/      # Coding standards and conventions\n├── guides/         # How-to guides and tutorials\n└── references/     # API and CLI references\n\\`\\`\\`\n\n## Getting Started\n\n1. Browse the [[MOC|Map of Content]] for an overview\n2. Check [[PRIMITIVES]] for technology decisions\n3. Read [[guides/getting-started/index|Getting Started Guide]]\n\n---\n*Generated by @weave-nn/knowledge-graph-agent*\n`,\n\n  primitives: `# Primitives\n\nCore building blocks and technology decisions for {{projectName}}.\n\n## Overview\n\nPrimitives are the foundational technologies that power this project. Each primitive represents a key technology choice with its rationale and usage patterns.\n\n## Categories\n\n### Languages\n{{#each languages}}\n- [[standards/programming-languages/{{this}}|{{this}}]]\n{{/each}}\n\n### Frameworks\n{{#each frameworks}}\n- [[{{category}}/{{slug}}|{{name}}]]\n{{/each}}\n\n### Key Dependencies\n{{#each dependencies}}\n- [[{{category}}/{{slug}}|{{name}}]] - {{description}}\n{{/each}}\n\n## Technology Decisions\n\n| Category | Choice | Rationale |\n|----------|--------|-----------|\n| Runtime | Node.js | Modern JavaScript runtime |\n| Language | TypeScript | Type safety and DX |\n| Package Manager | npm/bun | Fast, reliable |\n\n---\n*Generated by @weave-nn/knowledge-graph-agent*\n`,\n\n  moc: `# Map of Content\n\nCentral navigation hub for {{projectName}} documentation.\n\n## Core Concepts\n{{#each concepts}}\n- [[concepts/{{this}}]]\n{{/each}}\n{{#unless concepts}}\n- *No concepts documented yet*\n{{/unless}}\n\n## Components\n{{#each components}}\n- [[components/{{this}}]]\n{{/each}}\n{{#unless components}}\n- *No components documented yet*\n{{/unless}}\n\n## Services\n{{#each services}}\n- [[services/{{this}}]]\n{{/each}}\n{{#unless services}}\n- *No services documented yet*\n{{/unless}}\n\n## Features\n{{#each features}}\n- [[features/{{this}}]]\n{{/each}}\n{{#unless features}}\n- *No features documented yet*\n{{/unless}}\n\n## Guides\n- [[guides/getting-started/index|Getting Started]]\n- [[guides/testing/index|Testing Guide]]\n- [[guides/deployment/index|Deployment Guide]]\n\n## References\n- [[references/api/index|API Reference]]\n- [[references/cli/index|CLI Reference]]\n\n---\n*Last updated: {{date}}*\n`,\n\n  'template-concept': `---\ntitle: {{title}}\ntype: concept\nstatus: draft\ntags: [concept]\ncreated: {{date}}\nupdated: {{date}}\n---\n\n# {{title}}\n\n## Overview\n\nBrief description of this concept.\n\n## Key Ideas\n\n- Point 1\n- Point 2\n- Point 3\n\n## Related Concepts\n\n- [[related-concept-1]]\n- [[related-concept-2]]\n\n## References\n\n- External reference 1\n- External reference 2\n`,\n\n  'template-technical': `---\ntitle: {{title}}\ntype: technical\nstatus: draft\ntags: [technical]\ncreated: {{date}}\nupdated: {{date}}\n---\n\n# {{title}}\n\n## Overview\n\nBrief description of this technical component.\n\n## Implementation\n\n\\`\\`\\`typescript\n// Code example\n\\`\\`\\`\n\n## Usage\n\nHow to use this component.\n\n## Configuration\n\nAvailable configuration options.\n\n## Related\n\n- [[related-technical-1]]\n`,\n\n  'template-feature': `---\ntitle: {{title}}\ntype: feature\nstatus: draft\ntags: [feature]\ncreated: {{date}}\nupdated: {{date}}\n---\n\n# {{title}}\n\n## Overview\n\nBrief description of this feature.\n\n## User Story\n\nAs a [user type], I want [goal] so that [benefit].\n\n## Acceptance Criteria\n\n- [ ] Criterion 1\n- [ ] Criterion 2\n- [ ] Criterion 3\n\n## Technical Implementation\n\nHow this feature is implemented.\n\n## Related Features\n\n- [[related-feature-1]]\n`,\n\n  'template-service': `---\ntitle: {{title}}\ntype: service\nstatus: draft\ntags: [service, api]\ncreated: {{date}}\nupdated: {{date}}\n---\n\n# {{title}}\n\n## Overview\n\nBrief description of this service.\n\n## Endpoints\n\n| Method | Path | Description |\n|--------|------|-------------|\n| GET | /api/... | Description |\n| POST | /api/... | Description |\n\n## Configuration\n\nEnvironment variables and configuration options.\n\n## Dependencies\n\n- [[dependency-1]]\n- [[dependency-2]]\n\n## Deployment\n\nDeployment instructions.\n`,\n\n  'template-guide': `---\ntitle: {{title}}\ntype: guide\nstatus: draft\ntags: [guide, tutorial]\ncreated: {{date}}\nupdated: {{date}}\n---\n\n# {{title}}\n\n## Prerequisites\n\n- Prerequisite 1\n- Prerequisite 2\n\n## Steps\n\n### Step 1: Title\n\nInstructions for step 1.\n\n### Step 2: Title\n\nInstructions for step 2.\n\n### Step 3: Title\n\nInstructions for step 3.\n\n## Troubleshooting\n\nCommon issues and solutions.\n\n## Next Steps\n\n- [[next-guide-1]]\n- [[next-guide-2]]\n`,\n};\n\n/**\n * Framework detection result\n */\ninterface FrameworkInfo {\n  name: string;\n  slug: string;\n  category: string;\n  version?: string;\n}\n\n/**\n * Initialize docs directory\n */\nexport async function initDocs(options: DocsInitOptions): Promise<DocsInitResult> {\n  const result: DocsInitResult = {\n    success: true,\n    docsPath: '',\n    filesCreated: [],\n    errors: [],\n  };\n\n  try {\n    const { projectRoot, docsPath = 'docs', includeExamples = true, detectFramework = true } = options;\n    const fullDocsPath = join(projectRoot, docsPath);\n    result.docsPath = fullDocsPath;\n\n    // Detect project information\n    const projectName = await detectProjectName(projectRoot);\n    const frameworks = detectFramework ? await detectFrameworks(projectRoot) : [];\n    const languages = detectFramework ? await detectLanguages(projectRoot) : [];\n    const dependencies = detectFramework ? await detectDependencies(projectRoot) : [];\n\n    // Create template context\n    const context = {\n      projectName,\n      date: new Date().toISOString().split('T')[0],\n      frameworks,\n      languages,\n      dependencies,\n      concepts: [],\n      components: [],\n      services: [],\n      features: [],\n    };\n\n    // Create directories\n    for (const dir of DEFAULT_STRUCTURE.directories) {\n      const dirPath = join(fullDocsPath, dir);\n      if (!existsSync(dirPath)) {\n        mkdirSync(dirPath, { recursive: true });\n        result.filesCreated.push(dirPath);\n      }\n    }\n\n    // Create files from templates\n    for (const [filePath, templateName] of Object.entries(DEFAULT_STRUCTURE.files)) {\n      const fullPath = join(fullDocsPath, filePath);\n\n      // Skip if file exists\n      if (existsSync(fullPath)) {\n        continue;\n      }\n\n      // Get template and compile\n      const template = TEMPLATES[templateName];\n      if (!template) {\n        result.errors.push(`Template not found: ${templateName}`);\n        continue;\n      }\n\n      try {\n        const compiled = Handlebars.compile(template);\n        const content = compiled(context);\n        writeFileSync(fullPath, content, 'utf-8');\n        result.filesCreated.push(fullPath);\n      } catch (error) {\n        result.errors.push(`Failed to create ${filePath}: ${error}`);\n      }\n    }\n\n    // Create example files if requested\n    if (includeExamples) {\n      await createExampleFiles(fullDocsPath, context, result);\n    }\n\n    // Create .obsidian folder for vault detection\n    const obsidianPath = join(fullDocsPath, '.obsidian');\n    if (!existsSync(obsidianPath)) {\n      mkdirSync(obsidianPath, { recursive: true });\n\n      // Create minimal app.json for Obsidian\n      const appJson = {\n        \"legacyEditor\": false,\n        \"livePreview\": true,\n      };\n      writeFileSync(join(obsidianPath, 'app.json'), JSON.stringify(appJson, null, 2));\n      result.filesCreated.push(obsidianPath);\n    }\n\n    result.success = result.errors.length === 0;\n  } catch (error) {\n    result.success = false;\n    result.errors.push(`Init failed: ${error}`);\n  }\n\n  return result;\n}\n\n/**\n * Detect project name from package.json or directory\n */\nasync function detectProjectName(projectRoot: string): Promise<string> {\n  try {\n    const pkgPath = join(projectRoot, 'package.json');\n    if (existsSync(pkgPath)) {\n      const pkg = JSON.parse(readFileSync(pkgPath, 'utf-8'));\n      if (pkg.name) {\n        // Remove scope if present\n        return pkg.name.replace(/^@[^/]+\\//, '');\n      }\n    }\n  } catch {\n    // Ignore errors\n  }\n\n  // Fall back to directory name\n  return basename(projectRoot);\n}\n\n/**\n * Detect frameworks from project files\n */\nasync function detectFrameworks(projectRoot: string): Promise<FrameworkInfo[]> {\n  const frameworks: FrameworkInfo[] = [];\n\n  try {\n    const pkgPath = join(projectRoot, 'package.json');\n    if (existsSync(pkgPath)) {\n      const pkg = JSON.parse(readFileSync(pkgPath, 'utf-8'));\n      const deps = { ...pkg.dependencies, ...pkg.devDependencies };\n\n      // Framework detection patterns\n      const patterns: Array<{ name: string; packages: string[]; category: string }> = [\n        { name: 'React', packages: ['react'], category: 'components/ui' },\n        { name: 'Next.js', packages: ['next'], category: 'services/api' },\n        { name: 'Vue', packages: ['vue'], category: 'components/ui' },\n        { name: 'Express', packages: ['express'], category: 'services/api' },\n        { name: 'Fastify', packages: ['fastify'], category: 'services/api' },\n        { name: 'Prisma', packages: ['@prisma/client', 'prisma'], category: 'integrations/databases' },\n        { name: 'TypeORM', packages: ['typeorm'], category: 'integrations/databases' },\n        { name: 'Jest', packages: ['jest'], category: 'guides/testing' },\n        { name: 'Vitest', packages: ['vitest'], category: 'guides/testing' },\n        { name: 'Vite', packages: ['vite'], category: 'standards/build-tools' },\n        { name: 'Webpack', packages: ['webpack'], category: 'standards/build-tools' },\n      ];\n\n      for (const pattern of patterns) {\n        for (const pkg of pattern.packages) {\n          if (deps[pkg]) {\n            frameworks.push({\n              name: pattern.name,\n              slug: pattern.name.toLowerCase().replace(/[^a-z0-9]+/g, '-'),\n              category: pattern.category,\n              version: deps[pkg],\n            });\n            break;\n          }\n        }\n      }\n    }\n  } catch {\n    // Ignore errors\n  }\n\n  return frameworks;\n}\n\n/**\n * Detect programming languages used\n */\nasync function detectLanguages(projectRoot: string): Promise<string[]> {\n  const languages: Set<string> = new Set();\n\n  try {\n    // Check for TypeScript\n    if (existsSync(join(projectRoot, 'tsconfig.json'))) {\n      languages.add('typescript');\n    }\n\n    // Check for package.json (JavaScript/Node.js)\n    if (existsSync(join(projectRoot, 'package.json'))) {\n      languages.add('javascript');\n    }\n\n    // Check for Python\n    if (existsSync(join(projectRoot, 'requirements.txt')) ||\n        existsSync(join(projectRoot, 'pyproject.toml'))) {\n      languages.add('python');\n    }\n\n    // Check for Rust\n    if (existsSync(join(projectRoot, 'Cargo.toml'))) {\n      languages.add('rust');\n    }\n\n    // Check for Go\n    if (existsSync(join(projectRoot, 'go.mod'))) {\n      languages.add('go');\n    }\n  } catch {\n    // Ignore errors\n  }\n\n  return Array.from(languages);\n}\n\n/**\n * Detect major dependencies\n */\nasync function detectDependencies(projectRoot: string): Promise<Array<{ name: string; slug: string; category: string; description: string }>> {\n  const deps: Array<{ name: string; slug: string; category: string; description: string }> = [];\n\n  try {\n    const pkgPath = join(projectRoot, 'package.json');\n    if (existsSync(pkgPath)) {\n      const pkg = JSON.parse(readFileSync(pkgPath, 'utf-8'));\n      const allDeps = { ...pkg.dependencies };\n\n      // Top dependencies to document\n      const topDeps = Object.keys(allDeps).slice(0, 10);\n\n      for (const dep of topDeps) {\n        deps.push({\n          name: dep,\n          slug: dep.replace(/^@/, '').replace(/[^a-z0-9]+/g, '-'),\n          category: 'components/utilities',\n          description: `Version ${allDeps[dep]}`,\n        });\n      }\n    }\n  } catch {\n    // Ignore errors\n  }\n\n  return deps;\n}\n\n/**\n * Create example documentation files\n */\nasync function createExampleFiles(\n  docsPath: string,\n  context: Record<string, unknown>,\n  result: DocsInitResult\n): Promise<void> {\n  const examples = [\n    {\n      path: 'guides/getting-started/index.md',\n      content: `---\ntitle: Getting Started\ntype: guide\nstatus: active\ntags: [guide, getting-started]\ncreated: ${context.date}\nupdated: ${context.date}\n---\n\n# Getting Started with ${context.projectName}\n\nWelcome! This guide will help you get up and running.\n\n## Prerequisites\n\n- Node.js 20+\n- npm or bun\n\n## Installation\n\n\\`\\`\\`bash\nnpm install\n\\`\\`\\`\n\n## Quick Start\n\n1. Clone the repository\n2. Install dependencies\n3. Run the development server\n\n## Next Steps\n\n- Explore the [[MOC|Map of Content]]\n- Review [[PRIMITIVES|Technology Primitives]]\n`,\n    },\n    {\n      path: 'concepts/architecture/index.md',\n      content: `---\ntitle: Architecture Overview\ntype: concept\nstatus: active\ntags: [architecture, concept]\ncreated: ${context.date}\nupdated: ${context.date}\n---\n\n# Architecture Overview\n\nHigh-level architecture of ${context.projectName}.\n\n## System Diagram\n\n\\`\\`\\`\n┌──────────────┐     ┌──────────────┐\n│   Frontend   │────▶│   Backend    │\n└──────────────┘     └──────────────┘\n                            │\n                     ┌──────▼──────┐\n                     │   Database  │\n                     └─────────────┘\n\\`\\`\\`\n\n## Key Components\n\n- **Frontend**: User interface\n- **Backend**: API and business logic\n- **Database**: Data persistence\n\n## Design Principles\n\n1. Separation of concerns\n2. Single responsibility\n3. Dependency injection\n`,\n    },\n  ];\n\n  for (const example of examples) {\n    const fullPath = join(docsPath, example.path);\n    if (!existsSync(fullPath)) {\n      const dir = join(fullPath, '..');\n      if (!existsSync(dir)) {\n        mkdirSync(dir, { recursive: true });\n      }\n      writeFileSync(fullPath, example.content, 'utf-8');\n      result.filesCreated.push(fullPath);\n    }\n  }\n}\n\n/**\n * Check if docs directory exists\n */\nexport function docsExist(projectRoot: string, docsPath = 'docs'): boolean {\n  return existsSync(join(projectRoot, docsPath));\n}\n\n/**\n * Get docs path for a project\n */\nexport function getDocsPath(projectRoot: string): string | null {\n  const possiblePaths = ['docs', 'documentation', 'doc', 'wiki'];\n\n  for (const path of possiblePaths) {\n    const fullPath = join(projectRoot, path);\n    if (existsSync(fullPath)) {\n      return fullPath;\n    }\n  }\n\n  return null;\n}\n"],"names":["pkg"],"mappings":"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"}