# Weaver Environment Configuration
# Copy this file to .env and fill in your values

# ============================
# VAULT CONFIGURATION
# ============================
# Path to Obsidian vault (absolute path)
VAULT_PATH=/home/aepod/dev/weave-nn/weave-nn

# ============================
# OBSIDIAN API CONFIGURATION
# ============================
# Obsidian Local REST API URL (default port: 27124)
OBSIDIAN_API_URL=https://localhost:27124

# Obsidian API Key (get from Obsidian Local REST API plugin settings)
OBSIDIAN_API_KEY=your-api-key-here

# ============================
# AI CONFIGURATION
# ============================
# Vercel AI Gateway API Key (default for all AI operations)
VERCEL_AI_GATEWAY_API_KEY=vck_1H7ExiTyiespMKAVurlWMqACIRtkIyugzquQ9RsmCvVenM555V4BDWse

# Anthropic API Key (fallback for local claude-flow development)
ANTHROPIC_API_KEY=your-anthropic-key-here

# AI Provider Selection (vercel-gateway | anthropic)
# Default: vercel-gateway (use Vercel AI Gateway)
# Set to 'anthropic' for local development with claude-flow
AI_PROVIDER=vercel-gateway

# Default AI Model (claude-3-5-sonnet-20241022, gpt-4o, etc.)
DEFAULT_AI_MODEL=claude-3-5-sonnet-20241022

# ============================
# WEAVER SERVICE CONFIGURATION
# ============================
# Environment (development | production)
NODE_ENV=development

# Weaver HTTP Server Port (for health checks, metrics)
WEAVER_PORT=3000

# Log Level (debug | info | warn | error)
LOG_LEVEL=info

# ============================
# SHADOW CACHE CONFIGURATION
# ============================
# SQLite database path (relative to weaver root)
SHADOW_CACHE_DB_PATH=./data/shadow-cache.db

# Cache sync interval in seconds (how often to sync vault to cache)
CACHE_SYNC_INTERVAL=300

# ============================
# FILE WATCHER CONFIGURATION
# ============================
# Enable file watcher (true | false)
FILE_WATCHER_ENABLED=true

# Debounce delay in milliseconds (wait time before processing file change)
FILE_WATCHER_DEBOUNCE=1000

# Ignored paths (comma-separated, relative to vault root)
FILE_WATCHER_IGNORE=.obsidian,.git,node_modules,.archive

# ============================
# WORKFLOW CONFIGURATION
# ============================
# Enable workflow orchestration (true | false)
WORKFLOWS_ENABLED=true

# Workflow persistence path (relative to weaver root)
WORKFLOWS_DB_PATH=./data/workflows.db

# ============================
# MCP SERVER CONFIGURATION
# ============================
# Enable MCP server (true | false)
MCP_ENABLED=true

# MCP server transport (stdio | http)
MCP_TRANSPORT=stdio

# ============================
# GIT CONFIGURATION
# ============================
# Enable auto-commit (true | false)
GIT_AUTO_COMMIT=true

# Git commit author name
GIT_AUTHOR_NAME=Weaver

# Git commit author email
GIT_AUTHOR_EMAIL=weaver@weave-nn.local

# Commit debounce time in milliseconds (default: 300000 = 5 minutes)
# This controls how long to wait for additional file changes before committing
GIT_COMMIT_DEBOUNCE_MS=300000

# ============================
# FEATURE FLAGS
# ============================
# Enable AI-powered features (extract memories, suggest tags, etc.)
FEATURE_AI_ENABLED=true

# Enable temporal queries (point-in-time graph state)
FEATURE_TEMPORAL_ENABLED=false

# Enable advanced graph analytics
FEATURE_GRAPH_ANALYTICS=false
# ============================
# PERCEPTION & LEARNING LOOP
# ============================
# Google Search API (optional - for enhanced search)
GOOGLE_API_KEY=your-google-api-key-here
GOOGLE_CSE_ID=your-custom-search-engine-id-here

# Bing Search API (optional - for enhanced search)
BING_API_KEY=your-bing-api-key-here

# Perception Configuration
PERCEPTION_ENABLE_WEB_SCRAPING=false
PERCEPTION_ENABLE_SEARCH=true
PERCEPTION_DEFAULT_SOURCE=search
PERCEPTION_MAX_RESULTS=10

# Web Scraper Configuration (requires Playwright)
WEB_SCRAPER_HEADLESS=true
WEB_SCRAPER_TIMEOUT=30000
WEB_SCRAPER_RETRIES=3
WEB_SCRAPER_USER_AGENT=Mozilla/5.0 (compatible; WeaverBot/1.0)

# Search API Configuration
SEARCH_PROVIDER_PRIORITY=duckduckgo,google,bing
SEARCH_MAX_RESULTS=10

# Learning Loop Configuration
LEARNING_ENABLE_PERCEPTION=true
LEARNING_ENABLE_REASONING=true
LEARNING_ENABLE_MEMORY=true
LEARNING_ENABLE_EXECUTION=true
LEARNING_AUTO_ADAPTATION=true
LEARNING_MIN_EXECUTIONS=5

# Memory/Chunking Configuration
MEMORY_MAX_CHUNK_SIZE=1000
MEMORY_CHUNK_OVERLAP=100
MEMORY_EMBEDDING_MODEL=text-embedding-ada-002

# Adaptation Configuration
ADAPTATION_THRESHOLD=0.7
ADAPTATION_MAX_STRATEGIES=10

# ============================
# SECURITY CONFIGURATION
# ============================
# Enable security features
ENABLE_RATE_LIMITING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_INPUT_VALIDATION=true
ENABLE_API_KEY_AUTH=false

# Rate Limiting Configuration
RATE_LIMIT_API_MAX_REQUESTS=100
RATE_LIMIT_API_WINDOW_MS=60000
RATE_LIMIT_WORKFLOW_MAX_REQUESTS=10
RATE_LIMIT_WORKFLOW_WINDOW_MS=60000
RATE_LIMIT_MCP_MAX_REQUESTS=60
RATE_LIMIT_MCP_WINDOW_MS=60000

# Audit Logging Configuration
AUDIT_LOG_DIR=./logs/audit
AUDIT_LOG_MAX_FILE_SIZE=10485760
AUDIT_LOG_MAX_FILES=100
AUDIT_LOG_ENABLE_CONSOLE=true
AUDIT_LOG_ENABLE_HASHING=true

# API Key Management Configuration
API_KEY_ROTATION_DAYS=90
API_KEY_WARNING_DAYS=14
API_KEY_MAX_ACTIVE=2
API_KEY_LENGTH=32

# Security Headers
SECURITY_ENABLE_HSTS=true
SECURITY_ENABLE_CSP=true
SECURITY_CSP_DIRECTIVES=default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';

# CORS Configuration (comma-separated list of allowed origins)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE
CORS_ALLOW_CREDENTIALS=true

# Session Configuration
SESSION_TIMEOUT_MS=3600000
MAX_LOGIN_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION_MS=900000

